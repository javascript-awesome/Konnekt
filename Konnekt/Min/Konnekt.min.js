var Konnekt=function(){var V=function(){return function(D,l,p,z){function N(b,e,f,O){b=void 0===b?{}:b;var g={},d=window.Proxy?new Proxy(g,{set:H,deleteProperty:M}):g,r=Object.keys(b,"all");Object.defineProperties(g,{__kbname:c("string"===typeof e?e:"default",!0,!0),__kbref:c(f?f.__kbref||f:d,!0,!0),__kbscopeString:c(O||"",!0,!0),__kbImmediateParent:c(f||null,!0,!0),__kbsubscribers:c({}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbcreatelisteners:c([]),
__kbdeletelisteners:c([]),__kbparentcreatelisteners:c([]),__kbparentdeletelisteners:c([]),__kbmethodlisteners:c([]),__kbmethodupdatelisteners:c([]),__kbpointers:c({}),__kbevents:c(w),length:c(0,!0),__kbnonproxy:c(g,!1,!0),__kbproxy:c(d,!1,!0),_stopChange:c(!1,!0)});g.__proto__=N.prototype;e=0;for(f=r.length;e<f;e++)d.set(r[e],b[r[e]]);g.__kbevents.addlistener=[];g.__kbevents.removelistener=[];g.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var e=
b.local.__kbpointers[b.arguments[0]],e=e.point.getLayer(e.keys);if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var e=b.local.__kbpointers[b.arguments[0]],e=e.point.getLayer(e.keys);if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1])}});return d}function E(b,e,f,d,g,n,r,m){this.stopPropogation=function(){this._stopPropogration=
!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=e;this.arguments=n;this.type=this.event=f;this.listener=r;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=d;this.oldValue=g;this.stopChange=m}function c(b,e,f,d){return{value:b,writable:!!e,enumerable:!!d,configurable:!!f}}function P(b,e,f){return{get:function(){return b.call(this)},set:function(f){e&&(b=f)},enumerable:!1,configurable:!!f}}function K(b,
e){var f=e,d=e;return{get:function(){return f},set:function(e){var n=new E(this,b,"set",e,f,arguments,"__kblisteners",this._stopChange);!0!==k(n)&&(d=f,f=e,n.stopChange||(n.listener="__kbupdatelisteners",n.type="postset",k(n)),this._stopChange||this.callSubscribers(b,f,d));this._stopChange=!1},configurable:!0,enumerable:!0}}function I(){var b=Array.prototype.slice.call(arguments),e=b.shift();return{get:function(){return b.reduce(function(b,e){return b[e]},e)},set:function(f){var d=b.slice(0,b.length-
1).reduce(function(b,e){return b[e]},e);(this._stopChange?d.stopChange():d)[b[b.length-1]]=f;this._stopChange=!1},enumerable:!0,configurable:!0}}function F(b,e){for(var f=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],d=[],g,n=0,r=f.length;n<r;n++)if(g=b[f[n].listener],A.call(g))for(var d=
Object.keys(g),m=0,B=d.length;m<B;m++)for(var c=0,k=g[d[m]].length;c<k;c++)e[f[n].method](d[m],g[d[m]][c]);else for(m=0,B=g.length;m<B;m++)e[f[n].method](g[m])}function H(b,e,f){if(L(b,e)||"length"===e){if("length"===e)if(f>b.length&&void 0!==b[f-1])b.length=f;else{if(f<b.length){e=f;for(var d=b.length;e<d;e++)b[e]&&delete b[e];b.length=f}}else b[e]=f;return!0}b.set(e,f)}function M(b,e){b.del(e);return!0}function R(b,e,f){var d=h(f),g=A(f),n=Q(f);if(d&&f.__kbname!==b.__kbname)"default"===f.__kbname?
b.merge(f,e):b.__kbpointers[e]||b.addPointer(f,e);else{var d=new E(this,e,"create",f,void 0,[],"__kbcreatelisteners",this._stopChange),r=k(d),m=parseInt(e,10);if(!0!==r)if((g||n)&&0!==Object.keys(f,"all").length)for(R.call(this,b,e,{}),g=0,n=Object.keys(f,"all"),d=n.length;g<d;g++)R.call(this[e],b[e],n[g],f[n[g]]);else{if(g||n)f=new N(f,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+e),F(b,f);Object.defineProperty(b,e,K(e,f));!isNaN(m)&&b.length<=m&&(b.length=m+1);d.listener=
"__kbupdatelisteners";d.type="postcreate";k(d)}}}function S(b,e,f,d){var g=h(f),n=A(f),r=Q(f);if(g&&f.__kbname!==b.__kbname)"default"===f.__kbname?b.merge(f,e):b.__kbpointers[e]||b.addPointer(f,e);else if(void 0===b[e])-1===q.indexOf(e)?R.call(this,b,e,f):(d?b.stopChange():b)[e]=f;else if(n||r)for(g=0,n=Object.keys(f,"all"),r=n.length;g<r;g++)S.call(this[e],b[e],n[g],f[n[g]],d);else(d?b.stopChange():b)[e]=f}function J(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function A(b){return"object"===
J(void 0!==b?b:this)}function Q(b){return"array"===J(void 0!==b?b:this)}function h(b){return"mixed"===J(void 0!==b?b:this)}function L(b,e){e="string"===typeof b?b:e;var f=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,e);return f?void 0===f.value:!1}function u(b,e){"number"===typeof b&&(b=b.toString());var f=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var d=new E(this,b,"set",e,this[b],arguments,"__kbmethodlisteners");
!0!==k(d)&&(S.call(this,f,b,e,this._stopChange),this.stopChange=void 0,d.type="postset",d.listener="__kbmethodupdatelisteners",k(d));return this}function G(b){return b.split(".")}function C(b,e){return function(f,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=this[e],n=new E(this,e,"addlistener",g,void 0,arguments,"");"string"===typeof f&&1!==G(f).length&&(g=G(f),f=g.pop(),g=g.join("."),n.local=this.getLayer(g),g=n.local[e],n.value=g);!0!==k(n)&&(A.call(g)?(void 0===g[f]&&
(g[f]=[]),g[f].push(d),n.type="postaddlistener",k(n)):Q.call(g)&&"function"===typeof f&&(g.push(f),n.type="postaddlistener",k(n)));return this}}function v(b,e){return function(f,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=this[e],n=new E(this,e,"removelistener",g,void 0,arguments,"");"string"===typeof f&&1!==G(f).length&&(g=G(f),g.pop(),g.join("."),n.local=this.getLayer(g),g=n.local[e],n.value=g,f=G(f).pop());if(!0!==k(n))if(A.call(g)){if(void 0!==g[f])for(var r=0,m=
g[f].length;r<m;r++)if(g[f][r].toString()===d.toString()){g[f].splice(r,1);n.type="postremovelistener";k(n);break}}else if(Q.call(g)&&"function"===typeof f)for(r=0,m=g.length;r<m;r++)if(g[r].toString()===f.toString()){g.splice(r,1);n.type="postremovelistener";k(n);break}return this}}function y(b,e){function f(b,e,d){var r=Object.keys(this,"all").filter(function(b){return h.call(this[b])}.bind(this)),m=this,B=b;"string"===typeof b&&1!==G(b).length&&(m=G(b),B=m.pop(),m=m.join("."),m=this.getLayer(m),
void 0===m[d][B]&&(m[d][B]=[]),m[d][B].push(e));A.call(m[d])?(void 0===m[d][B]&&(m[d][B]=[]),m[d][B].push(e),m=m.__kbpointers[B],m=m.point.getLayer(m.keys),void 0!==m[B]&&(void 0===m[d][B]&&(m[d][B]=[]),m[d][B].push(_func))):m[d].push(e);B=0;for(m=r.length;B<m;B++)f.call(this[r[B]],b,e,d)}return function(d,g){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var n=new E(this,e,"addchildlistener",void 0,void 0,arguments,"");!0!==k(n)&&(f.call(this.__kbnonproxy,d,g,e),n.type="postaddchildlistener",
k(n));return this}}function x(b,e){function f(b,e,d){var r=Object.keys(this,"all").filter(function(b){return h.call(this[b])}.bind(this)),m=this,B=b;if("string"===typeof b&&1!==G(b).length){var c=G(b),B=c.pop();c.join(".");m=this.getLayer(c);if(void 0!==m[d][b])for(var c=0,k=m[d][b].length;c<k;c++)if(m[d][b][c].toString()===e.toString()){m[d][b].splice(c,1);break}}if(A.call(m[d])){if(void 0!==m[d][B]){c=0;for(k=m[d][B].length;c<k;c++)if(m[d][B][c].toString()===e.toString()){m[d][B].splice(c,1);break}if(-1!==
m.__kbpointers.indexOf(B)&&(c=m.__kbpointers[B],m=c.point.getLayer(c.keys),void 0!==m[d][B]))for(c=0,k=m[d][B].length;c<k;c++)if(m[d][B][c].toString()===e.toString()){m[d][B].splice(c,1);break}}}else for(c=0,k=m[d].length;c<k;c++)if(m[d][c].toString()===e.toString()){m[d].splice(c,1);break}c=0;for(k=r.length;c<k;c++)f.call(this[r[c]],b,e,d)}return function(d,g){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var n=new E(this,e,"removechildlistener",void 0,void 0,arguments,"");!0!==
k(n)&&(f.call(this.__kbnonproxy,d,g,e),n.type="postremovechildlistener",k(n));return this}}var w={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},
q=["__proto__","_stopChange"],t=function(b,e){if(!e._stopPropogration&&b)for(var f=0,d=b.length;f!==d&&(b[f](e),!e._stopPropogration);f++);},k=function(b){if(b.listener){var e=b.local[b.listener],f=b.local[b.listener.replace("__kb","__kbparent")];A.call(e)?(t(e[b.key],b),t(e["*"],b)):t(e,b);A.call(f)?(t(f[b.key],b),t(f["*"],b)):t(f,b)}t(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault},d=Array.prototype.sort;Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);
Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof N?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,e){return Object._keys(b).filter(function(b){return e&&"object"!==e&&"o"!==e?"all"===e?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(N.prototype,{"typeof":c(J,!1,!0),sizeof:c(function(b){function e(b){for(var d=Object.keys(b,"all"),n=0,r=void 0,m=0,c=d.length;m<c;m++)r=b[d[m]],"object"===
typeof r&&void 0!==r&&null!==r?-1===f.indexOf(r)&&(f.push(r),n+=e(r)):"string"===typeof r?n+=2*r.length:"number"===typeof r?n+=8:"boolean"===typeof r?n+=4:"function"===typeof r&&(n+=2*r.toString().length),n+=2*d[m].length;return n}var f=[];return e(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:c(A,!1,!0),isArray:c(Q,!1,!0),isMixed:c(h,!1,!0),isObservable:c(L,!1,!0),stringify:c(function(b){var e=[];return JSON.stringify(b||this,function(b,d){if(Q(d)||A(d)){if(-1!==e.indexOf(d))return;e.push(d)}return d})},
!1,!0),getKeys:c(function(b,e){e="string"===typeof b?b:e?e:"object";return Object.keys("string"===typeof b||void 0===b?this:b,e)},!1,!0),getIndexes:c(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var e=[],f=0,d=b.length;f<d;f++)void 0!==b[f]&&(e[e.length]=f);return e},!1,!0),keyCount:P(function(){return this.getKeys("object").length},!1,!0),indexCount:P(function(){return this.length},!1,!0),count:P(function(){return this.keyCount+this.indexCount},!1,!0),concat:c(Array.prototype.concat),
every:c(Array.prototype.every),filter:c(Array.prototype.filter),find:c(Array.prototype.find),findIndex:c(Array.prototype.findIndex),forEach:c(Array.prototype.forEach),includes:c(Array.prototype.includes),indexOf:c(Array.prototype.indexOf),join:c(Array.prototype.join),lastIndexOf:c(Array.prototype.lastIndexOf),map:c(Array.prototype.map),reduce:c(Array.prototype.reduce),reduceRight:c(Array.prototype.reduceRight),slice:c(Array.prototype.slice),some:c(Array.prototype.some),entries:c(Array.prototype.entries),
toLocaleString:c(Array.prototype.toLocaleString),add:c(function(b,e){u.call(this,b,e);return this}),set:c(u),get:c(function(b){"number"===typeof b&&(b=b.toString());var e=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(e)return e[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:c(function(b,e){var f="number"===typeof b||!isNaN(parseInt(b,10));f&&(b=b.toString());var d=-1!==b.indexOf(".")?this.getLayer(b):
this,g=b.split(".").pop();if(d&&void 0!==d[g])if(f&&d.length>parseInt(b,10)&&!e)d=d.__kbnonproxy,d.splice(g,1);else{var n=new E(d,b,"delete",d[g],void 0,[],"__kbmethodlisteners"),r=k(n),m=new E(d,b,"delete",d[g],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==k(m)&&!0!==r&&(d=d.__kbnonproxy,Object.defineProperty(d,g,c(void 0,!0,!0,!1)),delete d[g],f&&d.length>parseInt(b,10)&&e&&--d.length,n.type="postdelete",n.listener="__kbmethodupdatelisteners",k(n),m.listener="__kbupdatelisteners",m.type=
"postdelete",m.oldValue=m.value,m.value=void 0,k(m))}return this}),exists:c(function(b){var e=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return e?void 0!==e[b]:!!e}),addPrototype:c(function(b,e){var f=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===f[b]?Object.defineProperty(f.__proto__,b,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",
prop,f);return this}),addPointer:c(function(){var b=Array.prototype.slice.call(arguments),e=b.shift(),f=b[b.length-1];e instanceof N||(e=new N(e,e.__kbname));var d=new E(this,f,"create",e[f],void 0,[],"__kbcreatelisteners",this._stopChange),g=this.__kbnonproxy;d.root=e.__kbref.__kbproxy;if(!0!==k(d)){Object.defineProperty(g,f,I.apply(g,arguments));g.__kbpointers[f]={keys:b.join("."),point:e};var b=g,e=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],
g=[],n;if(b[f].__kbImmediateParent)for(var r=0,m=e.length;r<m;r++){n=b[e[r].listener];for(var g=Object.keys(n),c=0,h=g.length;c<h;c++)if(f===g[r])for(var q=0,u=n[g[r]].length;q<u;q++)void 0===b[f].__kbImmediateParent[e[r].listener][f]&&(b[f].__kbImmediateParent[e[r].listener][f]=[]),b[f].__kbImmediateParent[e[r].listener][f].push(n[g[r]][q])}F(b,b[f]);d.listener="__kbupdatelisteners";d.type="postcreate";k(d)}return this}),move:c(function(b,e){this.__kbnonproxy.set(e,b[e]);h(b)?b.del(e):(b[e]=null,
delete b[e]);return this}),copy:c(function(b,e){var f=this.__kbnonproxy;h(b)?"default"===b.__kbname?f.merge(b[e],e):f.addPointer(b,e):f.set(e,b[e]);return this}),merge:c(function(b,e){function f(b,e){for(var g=h(b)?b.keys("object"):Object.keys(b),c,k=0,q=g.length;k<q;k++)c=b[g[k]],"object"===typeof c&&-1===d.indexOf(c)&&"undefined"!==e[g[k]]?f(c,e):e.set(g[k],"object"===typeof c?{}:c)}var d=[],g=this.__kbnonproxy;e&&void 0===g[e]&&g.set(e,{});f(b,e?g[e]:g);return this}),copyWithin:c(function(b,e,
d){e=e||0;d=d||0;var c=new E(this,b,"copyWithin",this[b],void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;if(!0!==k(c)&&b<g.length){b=0>b?g.length-1:b;e=e<g.length?e:g.length-1;d=d<g.length?d:g.length-1;e=0>e?g.length-1:e;d=0>e?g.length-1:d;for(var n=e;n<=d;n++)g.set(b+(n-e),g[n]);c.type="postcopyWithin";c.listener="__kbmethodupdatelisteners";k(c)}return this}),fill:c(function(b,e,d){e=void 0!==e?Math.max(0,e):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;
var c=new E(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;if(!0!==k(c)){for(var n=a.key;n<d;n++)g[n]=b;c.type="postfill";c.listener="__kbmethodupdatelisteners";k(c)}return this}),pop:c(function(){var b=new E(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){var d=e[e.length-1];e.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";k(b);return d}return null}),push:c(function(b){var e=
new E(this,this.length,"push",b,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==k(e)&&(d.set(d.length,b),e.type="postpush",e.listener="__kbmethodupdatelisteners",k(e));return this.length}),reverse:c(function(){var b=new E(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=null,c=null,g=e.length,d=0;d<g/2;d+=1){var c=g-1-d,n=e[d];e[d]=e[c];e[c]=n}b.type="postreverse";b.listener="__kbmethodupdatelisteners";k(b)}return this}),
shift:c(function(){var b=new E(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=a.key,c=this.length-1;d<c;d++)e[d]=e[d+1];e.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";k(b)}return null}),sort:c(function(){var b=new E(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;!0!==k(b)&&(d.apply(e,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",k(b));return this}),
splice:c(function(b,e,d){b="string"===typeof b?parseInt(b,10):b;var c=new E(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;if(!0!==k(c)){var n=[],r=Array.prototype.slice.call(arguments,2),m=r.length-2,B=0;if(0!==e&&void 0!==g[b-1+e])for(var h=0,q=e;h<q;h++){n.push(g[b+h]);for(var u=b+h,t=this.length-1;u<t;u++)g[u]=g[u+1];g.del(g.length-1,!0)}if(0!==m)for(h=0,q=m;h<q;h++){B=b+Math.min(1,h);u=g.length;for(t=B;u>t;u--)g.set(u,g[u-1]);g.set(B,r[h])}c.type="postsplice";
c.listener="__kbmethodupdatelisteners";k(c);return n}return[]}),unshift:c(function(){var b=new E(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=Array.prototype.slice.call(arguments),c=e.length-1+d.length,g=d.length;-1!==c;c--)c<g?e.set(c,d[c]):e.set(c,e[c-d.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";k(b)}return this.length}),getLayer:c(function(b){function e(b){var d=b[0];return void 0===this[d]&&0!==b.length-
1?null:h(this[d])?0!==b.length-1?(b.shift(),e.call(this[d],b)):this[d]:this}b=G(b);return e.call(this,b)}),setLayer:c(function(b){function e(b){var d=b[0];void 0===this[d]&&0!==b.length-1&&(this[d]=N({},this.__kbname,this,this.__kbscopeString+"."+d));return h(this[d])?0!==b.length-1?(b.shift(),e.call(this[d],b)):this[d]:this}b=G(b);return e.call(this,b)}),ignoreCreate:c(function(b){-1===q.indexOf(b)&&q.push(b);return this}),addActionListener:c(function(b,e){var d=this.__kbnonproxy;void 0!==d.__kbref.__kbevents[b]&&
d.__kbref.__kbevents[b].push(e);return this}),removeActionListener:c(function(b,e){var d=this.__kbnonproxy;if(void 0!==d.__kbref.__kbevents[b])for(var c=0,g=d.__kbref.__kbevents[b];c<g;c++)if(d.__kbref.__kbevents[b][c].toString()===e.toString()){d.__kbref.__kbevents[b].splice(c,1);break}return this}),subscribe:c(function(b,e){var d=this.__kbnonproxy;void 0===d.__kbsubscribers[b]&&(d.__kbsubscribers[b]=[]);d.__kbsubscribers[b].push(e);return this}),unsubscribe:c(function(b,e){var d=this.__kbnonproxy;
if(void 0!==d.__kbsubscribers[b])for(var c=0,g=d.__kbsubscribers[b].length;c<g;c++)if(d.__kbsubscribers[b][c].toString()===e.toString()){d.__kbsubscribers[b].splice(c,1);break}return this}),callSubscribers:c(function(b,d,f){var c=this.__kbnonproxy;if(void 0!==c.__kbsubscribers[b])for(var g=0,n=c.__kbsubscribers[b].length;g<n;g++)c.__kbsubscribers[b].call(this,b,d,f);return this}),stopChange:c(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(N.prototype,{addDataListener:c(C("addDataListener",
"__kblisteners")),removeDataListener:c(v("removeDataListener","__kblisteners")),addDataUpdateListener:c(C("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(v("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:c(C("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:c(v("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:c(C("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:c(v("removeDataDeleteListener",
"__kbdeletelisteners")),addDataMethodListener:c(C("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:c(v("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:c(C("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:c(v("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:c(y("addChildDataListener","__kbparentlisteners")),removeChildDataListener:c(x("removeChildDataListener","__kbparentlisteners")),
addChildDataUpdateListener:c(y("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:c(x("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:c(y("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:c(x("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:c(y("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:c(x("removeChildDataDeleteListener",
"__kbparentdeletelisteners"))});return N}}(),W=function(){return function(){function D(z){if("object"===typeof z)for(var p=0,E=z.length;p<E;p++)K_Components[z[p]]?l(z[p],K_Components[z[p]],document.getElementById("script_"+z[p])):D.load(z[p],"component/"+z[p]+"/"+location.search,l);else"string"===typeof z&&(K_Components[z[p]]?l(z,K_Components[z],document.getElementById("script_"+z)):D.load(z,"component/"+z+"/"+location.search,l))}var l=function(){},p=/(<\/.*?>)/g;window.K_Components||(window.K_Components=
{});D.getUnknowns=function(l){var D=l.match(p);return D.map(function(l){return l.replace(/[<\/>]/g,"")}).filter(function(l,c){return document.createElement(l)instanceof HTMLUnknownElement&&-1===D.indexOf(l,c+1)&&!K_Components[l]})};D.load=function(l,p,E){document.head.appendChild(function(c,l,z){var p=document.createElement("script");p.type="text/javascript";p.charset="utf-8";p.async=!0;p.src=l;p.id="script_"+c;p.onload=function(){z(c,K_Components[c],this)};return p}(l,p,E));return D};D.onLoad=function(p){if(void 0===
p)return l;l="function"===typeof p?p:l;return D};return D}}(),U=function(){function D(){function l(d,b){var e=d.length,f;for(f=0;f<e&&(d[f](b),void 0===b._stopPropogation);f++);}function p(d,b){var e=d.length,f;for(f=0;f<e&&(b.child=b.target,b.target=d[f].parent,d[f].func(b),void 0===b._stopPropogation);f++);}function z(d,b){for(var e=d.length;0<e;q++)if(d[q].toString()===b.toString())return!0;return!1}function D(d,b,e,f,c,g,n,r){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=
function(){this._preventDefault=!0};this.value=e;this.oldValue=f;this.target=d;this.attr=b;this.arguments=c;this.action=g;this.child=void 0;this.type=n;this.stopChange=r}function E(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function c(d,b,e,f){var c=d.get,g=d.set,n;return function(d){n=
c.call(this);e(this,b,d,n,void 0,this._stopChange)&&g.call(this,d);this._stopChange||f(this,b,d,n);this._stopChange=void 0}}function P(d,b,e,f){var c;return function(g){c=d.value;e(this,b,g,c,arguments,this._stopChange)&&(d.value=g);this._stopChange||f(this,b,g,c,arguments);this._stopChange=void 0}}function K(d,b,e,f){var c=d.value,g;return function(){e(this,b,null,null,arguments,this._stopChange)&&(g=c.apply(this,arguments));this._stopChange||f(this,b,null,null,arguments,g);this._stopChange=void 0;
return g}}function I(d,b,e,f,c){var g=c.style,n=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),r,m;return{get:function(){return m},set:function(d){r=m;e(c,b,d,r,void 0,this._stopChange)&&(m=d,g.setProperty(n,d));this._stopChange||f(c,b,d,r);this._stopChange=void 0},enumerable:!0,configurable:!0}}function F(d,b,e,f){if("function"!==typeof b)return h;var c=-1!==["value","checked"].indexOf(d),g=-1!==x.indexOf(d),n;if(this.toString()!==h.toString())if(e){var r=this.querySelectorAll("*");e=r.length;
for(var m,k=0;k<e;k++){m=r[k].attrListeners();if(c||"*"===d)void 0!==r[k].addInputBinding&&r[k].addInputBinding(),void 0!==r[k].addInputBoxBinding&&r[k].addInputBoxBinding();if(g)h.injectStyleProperty(r[k],d),n=f?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===d){n=f?"_parentStyleUpdateListeners":"_parentStyleListeners";e=x.length;for(var q=0;q<e;q++)h.injectStyleProperty(r[k],x[q]);void 0===m[n]["*"]&&(m[n]["*"]=[]);m[n]["*"].push({parent:this,func:b})}n=f?"_parentAttrUpdateListeners":
"_parentAttrListeners"}void 0===m[n][d]&&(m[n][d]=[]);m[n][d].push({parent:this,func:b})}}else{m=this.attrListeners();if(g)n=f?"_styleUpdateListeners":"_styleListeners",h.injectStyleProperty(this,d);else{if(c||"*"===d)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===d){n=f?"_styleUpdateListeners":"_styleListeners";e=x.length;for(k=0;k<e;k++)h.injectStyleProperty(this,x[k]);void 0===m[n][d]&&(m[n][d]=[]);m[n][d].push(b)}n=f?
"_attrUpdateListeners":"_attrListeners"}void 0===m[n][d]&&(m[n][d]=[]);m[n][d].push(b)}else{if(c||"*"===d)for(q=document.querySelectorAll("input, textarea"),e=q.length,k=0;k<e;k++)void 0!==q[k].addInputBinding&&q[k].addInputBinding(),void 0!==q[k].addInputBoxBinding&&q[k].addInputBoxBinding();if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=g.length+1;g.unshift(document.body);for(k=0;k<e;k++)h.injectStyleProperty(g[k],d);n=f?C:G}else{if("*"===d){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));
e=g.length+1;c=x.length;g.unshift(document.body);for(k=0;k<e;k++)for(q=0;q<c;q++)h.injectStyleProperty(g[k],x[q]);n=f?C:G;void 0===n[d]&&(n[d]=[]);n[d].push(b)}n=f?u:L}void 0===n[d]&&(n[d]=[]);n[d].push(b)}}function H(d,b,e,f){function c(d,e){var f=e[d],g=f.length;for(k=0;k<g;k++)f[k].toString()===b.toString()&&f.splice(k,1)}if("function"!==typeof b)return h;["value","checked"].indexOf(d);var g=-1!==x.indexOf(d),k;if(this.toString()!==h.toString())if(e){e=this.querySelectorAll("*");var r=e.length;
g?(g=f?"_childStyleUpdateListeners":"_childStyleListeners",c(d,this.attrListeners()[g]),g=f?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===d&&(g=f?"_childStyleUpdateListeners":"_childStyleListeners",c(d,this.attrListeners()[g])),g=f?"_childAttrUpdateListeners":"_childAttrListeners",c(d,this.attrListeners()[g]),g=f?"_parentAttrUpdateListeners":"_parentAttrListeners");for(k=0;k<r;k++){for(var m=e[k].attrListeners()[g][d],q=m.length,t=0;t<q;t++)m[t].isEqualNode(this)&&m.slice(t,1);if("*"===
d)for(listenersStyle=f?"_parentStyleUpdateListeners":"_parentStyleListeners",m=e[k].attrListeners()[g][d],q=m.length,t=0;t<q;t++)m[t].isEqualNode(this)&&m.slice(t,1)}}else g?g=f?"_styleUpdateListeners":"_styleListeners":("*"===d&&(g=f?"_styleUpdateListeners":"_styleListeners",c(d,this.attrListeners()[g])),g=f?"_attrUpdateListeners":"_attrListeners"),c(d,this.attrListeners()[g]);else g?g=f?C:G:("*"===d&&(g=f?C:G,c(d,g)),g=f?u:L),c(d,g)}function M(d,b){h.addAttrListener.call(this,d,b,!0);return this}
function R(d,b){h.addAttrUpdateListener.call(this,d,b,!0);return this}function S(d,b){h.removeAttrListener.call(this,d,b,!0);return this}function J(d,b){h.removeAttrUpdateListener.call(this,d,b,!0);return this}function A(d,b,e){var f=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(f._attrListeners[b],e))return!0;break;case "attrupdate":if(z(f._attrUpdateListeners[b],e))return!0}return!1}function Q(){this._stopChange=!0;return this}function h(){function d(b,
d){var e,f=d.length;for(e=0;e<f;e++)-1===b.indexOf(d[e])&&b.push(d[e]);return b}function b(b,d){for(var e=Object.keys(b),f,c,g=0,k=e.length;g<k;g++)if(f=e[g],void 0===d[f])d[f]=b[f].slice();else for(var n=0,q=b[f].length;n<q;n++)c=b[f][n],d[f].push(c)}function e(e){if(3!==e.target.nodeType&&8!==e.target.nodeType){var f=e.target.attrListeners(),c,g=["value","checked"],k=f._attrListeners,n=f._attrUpdateListeners,q=f._parentAttrListeners;c=f._parentAttrUpdateListeners;var t=!1;if(void 0!==L["*"]||void 0!==
u["*"])t=!0;if(!0!==t&&void 0!==k["*"]||void 0!==n["*"]||void 0!==q["*"]||void 0!==c["*"])t=!0;if(!0!==t)for(var A=0;A<g.length;A++)if(void 0!==L[g[A]]||void 0!==u[g[A]]||void 0!==k[g[A]]||void 0!==n[g[A]]||void 0!==q[g[A]]||void 0!==c[g[A]]){t=!0;break}c=t;g=Object.keys(G);k=Object.keys(C);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);n=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);q=[];if(0!==g.length||0!==k.length)q=d(q,g),q=d(q,k);if(0!==
q.length&&0!==n.length||0!==f.length)q=d(q,n),q=d(q,f);-1!==q.indexOf("*")&&(q=x);var f=q,g=f.length,l,v,k=[],p,n="outerHTML"===e.attr||"outerText"===e.attr?e.attr:void 0,q=e.target;void 0!==n&&(e.attr="appendChild",e.arguments=[e.target],e.target=e.target.parentElement);if(c){"appendChild"===e.attr&&3!==e.arguments[0].nodeType&&8!==e.arguments[0].nodeType?(k=Array.prototype.slice.call(e.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==e.arguments[0].tagName&&"TEXTAREA"!==e.arguments[0].tagName||
k.unshift(e.arguments[0])):k=Array.prototype.slice.call(e.target.querySelectorAll("input,textarea"));p=k.length;for(var O=0;O<p;O++)void 0!==k[O].addInputBinding&&k[O].addInputBinding(),void 0!==k[O].addInputBoxBinding&&k[O].addInputBoxBinding()}"appendChild"===e.attr&&"#text"!==e.arguments[0].nodeName&&"#comment"!==e.arguments[0].nodeName?(k=Array.prototype.slice.call(e.arguments[0].querySelectorAll("*")),k.unshift(e.arguments[0])):k=Array.prototype.slice.call(e.target.querySelectorAll("*"));c=e.target.__kb._parentAttrListeners;
t=e.target.__kb._parentAttrUpdateListeners;A=e.target.__kb._parentStyleListeners;l=e.target.__kb._parentStyleUpdateListeners;p=k.length;for(O=0;O<p;O++){if(0!==g)for(v=0;v<g;v++)h.injectStyleProperty(k[O],f[v]);v=k[O].attrListeners();b(c,v._parentAttrListeners);b(t,v._parentAttrUpdateListeners);b(A,v._parentStyleListeners);b(l,v._parentStyleUpdateListeners)}void 0!==n&&(e.attr=n,e.target=q,e.arguments=[])}}function f(b){var e=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:
"";g(b.target,b.arguments[0],d,void 0!==e?e.value:"",[d])||b.preventDefault()}function c(b){var e=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:"";n(b.target,b.arguments[0],d,void 0!==e?e.value:"",[d])}h.injectPrototypes(Node,"Node");h.injectPrototypes(Element,"Element");h.injectPrototypes(HTMLElement,"HTMLElement");h.injectPrototypes(HTMLInputElement,"HTMLInputElement");h.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");h.injectPrototypes(Document,"Document");
var g=t,n=k;h.addAttrUpdateListener("appendChild",e);h.addAttrUpdateListener("removeChild",e);h.addAttrUpdateListener("innerHTML",e);h.addAttrUpdateListener("outerHTML",e);h.addAttrUpdateListener("innerText",e);h.addAttrUpdateListener("outerText",e);h.addAttrUpdateListener("textContent",e);h.addAttrListener("setAttribute",f);h.addAttrListener("removeAttribute",f);h.addAttrUpdateListener("setAttribute",c);h.addAttrUpdateListener("removeAttribute",c);return h}var L={},u={},G={},C={},v={},y="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
x=Object.getOwnPropertyNames(document.documentElement.style),w=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}).concat(["addEventListener","removeEventListener"]),q,t=function(d,b,e,f,c,g){e=new D(d,b,e,f,c,void 0,"set",g);void 0!==d.__kb&&(f=d.__kb._attrListeners,c=d.__kb._styleListeners,g=d.__kb._parentAttrListeners,d=d.__kb._parentStyleListeners,void 0!==f[b]&&l(f[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&l(c[b],e),void 0===e._stopPropogation&&void 0!==
f["*"]&&(l(f["*"],e),void 0===e._stopPropogation&&l(c["*"],e)),void 0===e._stopPropogation&&void 0!==g[b]&&p(g[b],e),void 0===e._stopPropogation&&void 0!==d[b]&&p(d[b],e),void 0===e._stopPropogation&&void 0!==g["*"]&&(p(g["*"],e),void 0===e._stopPropogation&&p(d["*"],e)));void 0===e._stopPropogation&&void 0!==L[b]&&l(L[b],e);void 0===e._stopPropogation&&void 0!==G[b]&&l(G[b],e);void 0===e._stopPropogation&&void 0!==L["*"]&&(l(L["*"],e),void 0===e._stopPropogation&&l(G["*"],e));return void 0!==e._preventDefault?
!1:!0},k=function(d,b,e,f,c,g){e=new D(d,b,e,f,c,g,"update");void 0!==d.__kb&&(f=d.__kb._attrUpdateListeners,c=d.__kb._styleUpdateListeners,g=d.__kb._parentAttrUpdateListeners,d=d.__kb._parentStyleUpdateListeners,void 0!==f[b]&&l(f[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&l(c[b],e),void 0===e._stopPropogation&&void 0!==f["*"]&&(l(f["*"],e),void 0===e._stopPropogation&&l(c["*"],e)),void 0===e._stopPropogation&&void 0!==g[b]&&p(g[b],e),void 0===e._stopPropogation&&void 0!==d[b]&&p(d[b],e),
void 0===e._stopPropogation&&void 0!==g["*"]&&(p(g["*"],e),void 0===e._stopPropogation&&p(d["*"],e)));void 0===e._stopPropogation&&void 0!==u[b]&&l(u[b],e);void 0===e._stopPropogation&&void 0!==C[b]&&l(C[b],e);void 0===e._stopPropogation&&void 0!==u["*"]&&(l(u["*"],e),void 0===e._stopPropogation&&l(C["*"],e));return void 0!==e._preventDefault?!1:!0};h.injectPrototypeProperty=function(d,b,e,f,q){var g=d.prototype,n=Object.getOwnPropertyDescriptor(g,b);e=e||d.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var r=v[e];f=f||t;q=q||k;void 0===g.attrListeners&&(g={},g.attrListeners=function(){void 0===this.__kb&&(this.__kb=new E);return this.__kb}.bind(g),g.addAttrListener=h.addAttrListener,g.addAttrUpdateListener=h.addAttrUpdateListener,g.addChildAttrListener=M,g.addChildAttrUpdateListener=R,g.hasListener=A,g.removeAttrListener=h.removeAttrListener,g.removeAttrUpdateListener=h.removeAttrUpdateListener,g.removeChildAttrListener=S,g.removeChildAttrUpdateListener=J,g.stopChange=Q);void 0===r&&(v[e]={obj:d,
proto:g,descriptors:{},set:void 0,update:void 0},r=v[e],r.set=f,r.update=q);void 0===r.descriptors[b]&&(r.descriptors[b]=n);n.configurable&&(void 0!==n.set?Object.defineProperty(g,b,{get:n.get,set:c(n,b,f,q),enumerable:!0,configurable:!0}):"function"===typeof n.value?Object.defineProperty(g,b,{value:K(n,b,f,q),writable:!0,enumerable:!0,configurable:!0}):void 0!==n.value&&Object.defineProperty(g,b,{get:function(){return n.value},set:P(n,b,f,q),enumerable:!0,configurable:!0}));return h};h.injectStyleProperty=
function(d,b,e,f){var c=d.style,g=Object.getOwnPropertyDescriptor(c,b),n=d.attrListeners().injectedStyle;e=e||t;f=f||k;void 0===n&&(d.attrListeners().injectedStyle={obj:d,proto:c,descriptors:{},set:void 0,update:void 0},d.attrListeners().injectedStyle.set=e,d.attrListeners().injectedStyle.update=f,n=d.attrListeners().injectedStyle);void 0===n.descriptors[b]&&(n.descriptors[b]=g);g.configurable&&Object.defineProperty(c,b,I(g,b,e,f,d));return h};h.injectPrototypes=function(d,b,e,f){var c=d.prototype;
b=b||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=v[b],n=Object.getOwnPropertyNames(c);e=e||t;f=f||k;var q;void 0===c.attrListeners&&(c.attrListeners=function(){void 0===this.__kb&&(this.__kb=new E);return this.__kb},c.addAttrListener=h.addAttrListener,c.addAttrUpdateListener=h.addAttrUpdateListener,c.addChildAttrListener=M,c.addChildAttrUpdateListener=R,c.removeAttrListener=h.removeAttrListener,c.removeAttrUpdateListener=h.removeAttrUpdateListener,c.removeChildAttrListener=S,
c.removeChildAttrUpdateListener=J,c.hasListener=A,c.stopChange=Q);void 0===g&&(v[b]={obj:d,proto:c,descriptors:{},set:void 0,update:void 0},g=v[b],g.set=e,g.update=f);q=v[b].descriptors;for(f=0;f<n.length;f+=1)void 0===q[n[f]]&&h.injectPrototypeProperty(d,n[f],b,e,k);if(-1!==n.indexOf("value")){var m=function(b){var e,d,f;if("checkbox"===this.type||"radio"===this.type)e=!0;d=e?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=e?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;e&&(g.set(this,"checked",this.checked,d)?g.update(this,"checked",this.checked,d):q.checked.set.call(this,d));this.value!==f&&(this.value=f);g.set(this,"value",this.value,d)?g.update(this,"value",this.value,d):q.value.set.call(this,d)}.bind(this),0)};c.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",m)};c.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",
m)};c.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",m)};c.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",m)}}return h};h.addAttrListener=function(d,b,e){if("html"===d){d=0;for(var f=y.length;d<f;d++)F.call(this,y[d],b,e,!1)}else if("events"===d)for(d=0,f=w.length;d<f;d++)F.call(this,w[d],b,e,!1);else F.call(this,d,b,e,!1);return this};h.addAttrUpdateListener=function(d,b,e){if("html"===
d){d=0;for(var f=y.length;d<f;d++)F.call(this,y[d],b,e,!0)}else if("events"===d)for(d=0,f=w.length;d<f;d++)F.call(this,w[d],b,e,!0);else F.call(this,d,b,e,!0);return this};h.removeAttrListener=function(d,b,e){if("html"===d){d=0;for(var f=y.length;d<f;d++)H.call(this,y[d],b,e,!1)}else if("events"===d)for(d=0,f=w.length;d<f;d++)H.call(this,w[d],b,e,!1);else H.call(this,d,b,e,!1);return this};h.removeAttrUpdateListener=function(d,b,e){if("html"===d){d=0;for(var f=y.length;d<f;d++)H.call(this,y[d],b,
e,!0)}else if("events"===d)for(d=0,f=w.length;d<f;d++)H.call(this,w[d],b,e,!0);else H.call(this,d,b,e,!0);return this};h.hasListener=function(d,b,e){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(L[b],e))return!0;break;case "attrupdate":if(z(u[b],e))return!0}return!1};h.injectedPrototypes=function(){return v};return h}"function"===typeof define&&define.amd&&define("KB",D);return D}(),X=function(D){return function(){function l(c){document.createDocumentFragment();
this.name=c.tagName.toLowerCase();this.template=M[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=c;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name}function p(c,l,h,p){return{value:c,writable:!!l,enumerable:!!p,configurable:!!h}}function z(){return new RegExp("(\\"+I.split("").join("\\")+")(.*?)(\\"+F.split("").join("\\")+")","g")}function N(c){return c.split(new RegExp("("+
I.split("").join("\\")+")(.*?)("+F.split("").join("\\")+")","g")).map(function(c,h,A){return A[h-1]===I?I+c+F:c}).filter(function(c,h,A){return 0!==c.length&&c!==I&&c!==F&&0!==c.length})}function E(c){return c.replace(new RegExp("["+I+F+"]","g"),"").replace(new RegExp("\\"+H.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function c(c){return c.reduce(function(c,h){h.match(/(\()(.*?)(\))/)?c.vmFilters[c.vmFilters.length]=h.replace(/[\(\)]/g,""):h.match(/(\[)(.*?)(\])/)?-1!==h.indexOf("~")?c.model[c.model.length]=
h.replace(/[\[\]\~]/g,""):-1!==h.indexOf("+")?c.local[c.local.length]=h.replace(/[\[\]\+]/g,""):c.session[c.session.length]=h.replace(/[\[\]\-]/g,""):c.filters[c.filters.length]=h;return c},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function P(c){return-1!==c.indexOf("for")?c.replace(new RegExp("["+I+F+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(c){return 0!==c.length}):[]}function K(){function A(q,h){this.text=q;this.key=h;this.keyLength=
this.key.split(".").length;this.localKey=this.key.split(".").pop();var k;k=-1!==q.indexOf(H)?q.replace(new RegExp("["+F+"]","g"),"").replace(new RegExp("(.*?)(\\"+H.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=c(k);this.component="for"===this.type?P(q)[1]:void 0;this.id=0}function l(c){if(0!==c.length){for(var t="",k=0,d=c.length;k<d;k++)t="string"===typeof c[k]?t+c[k]:void 0===c[k]._data?t+c[k].text:t+h(c[k]._data.get(c[k].key),c[k].filters.filters,c[k]._data.filters);
return t}return h(c[0]._data.get(c[0].key),c[0].filters.filters,c[0]._data.filters)}function h(c,h,k){return h.reduce(function(d,b){return k[b]?k[b](d):d},c)}function z(c,h,k,d){return h.reduce(function(b,e){return k[e]?k[e](b,d):b},c)}function u(c,h){for(var k=0,d=h.length;k<d;k++)c.stopChange().appendChild(h[k])}function G(c){if(c&&window.model)return window.model.get(c[0])}function C(c,h){if(h&&0!==h.length&&window.model)for(var k=0,d=h.length;k<d;k++)window.model.set(h[k],c)}function v(c){if(c&&
window.localStorage)return localStorage.getItem(c[0])}function y(c,h){if(c&&0!==c.length&&window.localStorage)for(var k=0,d=c.length;k<d;k++)localStorage.setItem(c[k],h)}function x(c){if(c&&window.sessionStorage)return sessionStorage.getItem(c[0])}function w(c,h){if(c&&0!==c.length&&window.sessionStorage)for(var k=0,d=c.length;k<d;k++)sessionStorage.setItem(c[k],h)}Object.defineProperties(A.prototype,{addPointer:p(function(c){for(var h=document.createElement(this.component),k=z(this._data.getLayer(this.key),
this.filters.filters,this._data.filters,c)[c],d=0,b=Object.keys(k,"all"),e=b.length;d<e;d++)h.k_post||(h.k_post={}),h.k_post[b[d]]=k;c>=this.node.children.length?this.node.stopChange().appendChild(h):this.node.stopChange().insertBefore(h,this.node.children[c]);c={event:"loopitem",node:h,parent:this.node};h=J[c.event];k=0;for(d=h.length;k<d;k++)h[k](c);return this}),removePointer:p(function(c){for(var h=this.node.children[c].kb_maps,k=0,d=Object.keys(this.node.children[c].kb_viewmodel.pointers),b=
d.length;k<b;k++){var e=h[d[k]];if(e)for(var f=0,u=e.length;f<u;f++)e[f].unsync(),e[f]=null,delete e[f]}this.node.stopChange().removeChild(this.node.children[c]);return this}),reapplyPointer:p(function(c){var h=this.node.children[c].kb_maps,k=0;c=Object.keys(this.node.children[c].kb_viewmodel.pointers);for(var d=c.length;k<d;k++){var b=h[c[k]];if(void 0!==b)for(var e=0,f=b.length;e<f;e++)b[e].reconnect()}return this}),connect:p(function(c){var h=this;this._data=c;"for"!==this.type?(this.dataListener=
function(c){"delete"===c.event?h.unsync():h.setDom(c.value)},c.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&(this.domListener=function(c){h.setData(c.value)},this.node.addAttrUpdateListener(this.listener,this.domListener))):(this.dataListener=function(c){"postset"!==c.type||c.oldValue&&0!==c.oldValue.length||(c.event="create");h.setLoop(c.key,c.event)},c.getLayer(this.key).addDataMethodUpdateListener(this.dataListener));"for"!==this.type&&(this.filters.model&&
0!==this.filters.model.length?this._data.stopChange().set(this.key,G(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,x(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,v(this.filters.local)),this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",u(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=
l(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(this.node.stopChange()[this.attr]=this._data.get(this.key))));return this}),reconnect:p(function(){"for"!==this.type?(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener)):data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);this.connect(this._data);return this}),createloop:p(function(){this.node.stopChange().innerHTML=
"";for(var c=0,h=z(this._data.get(this.key),this.filters.filters,this._data.filters).length;c<h;c++)this.setLoop(c,"create");return this}),setData:p(function(c){c=h(c,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,c);C(this.filters.model,c);w(this.filters.session,c);y(this.filters.local,c);return this}),setDom:p(function(c){C(this.filters.model,c);w(this.filters.session,c);y(this.filters.local,c);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):
this.isInput&&-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",u(this.node,this._data.innerHTML)):this.local.stopChange()[this.localAttr]=l(this.bindText);return this}),setLoop:p(function(c,h){switch(h){case "create":this.addPointer(c);break;case "delete":this.removePointer(c);break;case "set":this.reapplyPointer(c);break;default:if("push"!==h)for(var k=0,d=this._data.getLayer(this.key).length;k<
d;k++)this.reapplyPointer(k)}return this}),bindMaps:p([]),unsync:p(function(){this._data=this.__proto__.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;return this})});return A}var I="{{",F="}}",H="|",M={},R=/(<\/.*?>)/g;D().call();var S=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}),J={loopitem:[]};l.start=function(c){if(void 0===c)return I;I="string"===typeof c?c:I;return l};l.end=function(c){if(void 0===
c)return F;F="string"===typeof c?c:F;return l};l.pipe=function(c){if(void 0===c)return H;H="string"===typeof c?c:H;return l};l.getUnknown=function(c){var l=c.match(R).map(function(c){return c.replace(/[<\/>]/g,"")});l.filter(function(c,p){return document.createElement(c)instanceof HTMLUnknownElement&&-1===l.indexOf(c,p+1)&&void 0===M[c]});return l};l.isRegistered=function(c){return void 0!==M[c]};l.register=function(c,p){void 0===M[c]?(M[c]=p,l.getUnknown(p)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",
c);return this};l.addEventListener=function(c,p){void 0!==J[c]?J[c].push(p):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",c);return l};l.removeEventListener=function(c,p){if(void 0!==J[c])for(var h=0,z=J[c].length;h<z;h++)J[c][h].toString()===p.toString()&&J[c].splice(h,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",c);return l};Object.defineProperties(l.prototype,{register:p(l.register),isRegistered:p(l.isRegistered),
getUnknown:p(l.getUnknown),map:p(function(c){function l(h,p){for(var u=0,G=h.length;u<G;u++)if(void 0===h[u].kb_maps&&8!==h[u].nodeType){h[u].kb_mapper=c;h[u].kb_maps=p;if(3===h[u].nodeType){var C=h[u],v=p,y=C.textContent;if(y.match(z())){var x=N(y),w=K();w.prototype.type=y.match(new RegExp("(\\"+I.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+F.split("").join("\\")+")","g"))?"for":"text";w.prototype.text=y;w.prototype.bindText=x;w.prototype.listener="textContent";w.prototype.attr="textContent";
w.prototype.localAttr="textContent";w.prototype.local=C;w.prototype.node=C.parentElement;w.prototype.binds=v;C=0;for(y=x.length;C<y;C++)if(0===x[C].indexOf(I)){var q="for"===w.prototype.type?P(x[C])[0]:E(x[C]),t=new w(x[C],q);void 0===v[q]&&(v[q]=[]);t.bindText[C]=t;t.bindMaps.push(t);t.id=v[q].length;v[q].push(t)}}}else for(v=h[u],x=p,w=Array.prototype.slice.call(v.attributes),C=v instanceof HTMLUnknownElement,y=0,q=w.length;y<q;y++)if(w[y].value.match(z())){var t=N(w[y].value),k=K();k.prototype.type=
C?"component":"attribute";k.prototype.text=w[y].value;k.prototype.bindText=t;k.prototype.isEvent=-1!==S.indexOf(w[y].name);k.prototype.isInput="input"===v.tagName.toLowerCase();k.prototype.isRadio=k.prototype.isInput?-1!==["radio","checkbox"].indexOf(v.type):!1;k.prototype.listener=w[y].name;k.prototype.attr=w[y].name;k.prototype.localAttr="value";k.prototype.local=w[y];k.prototype.node=v;k.prototype.binds=x;k.prototype.isEvent&&v.removeAttribute(w[y].name);for(var d=0,b=t.length;d<b;d++)if(0===t[d].indexOf(I)){var e=
E(t[d]),f=new k(t[d],e);void 0===x[e]&&(x[e]=[]);f.bindText[d]=f;f.bindMaps.push(f);f.id=x[e].length;x[e].push(f)}}h[u].childNodes&&0!==h[u].childNodes.length&&(p=l(h[u].childNodes,p))}return p}return l(c.childNodes,{})})});return l}}(U),Y=function(){return function(){function D(z){0===z.length&&(z=l);document.body.innerHTML="<"+z+"></"+z+">";p(z);return D}var l="",p=function(){};D.base=function(p){if(void 0===p)return l;l="string"===typeof p?p:l;return D};D.onChange=function(l){if(void 0===l)return p;
p="function"===typeof l?l:p;return D};D.watch=function(p){window.onhashchange=p?function(){D(window.location.hash.replace("#",""))}:null;return D};return D}}(),T=function(D,l,p,z,N){return function(p){function c(h,p,l,v){function y(b,c,d,g,k){for(var h=F({},b),m=0,l=Object.keys(c.prototype),u=l.length;m<u;m++)h.__proto__[l[m]]=c.prototype[l[m]];m=0;l=Object.keys(g);for(u=l.length;m<u;m++)-1!==Q.indexOf(l[m])?Object.defineProperty(h,l[m],K(g[l[m]],"filters"!==l[m])):g.pointers?void 0===g.pointers[l[m]]&&
h.set(l[m],g[l[m]]):h.set(l[m],g[l[m]]);if(g.pointers)for(h.pointers||Object.defineProperty(h,"pointers",K({},!1,!0)),m=0,l=Object.keys(g.pointers),u=l.length;m<u;m++)h.pointers[l[m]]=g.pointers[l[m]],h.addPointer(h.pointers[l[m]].point,h.pointers[l[m]].key,l[m]);c.apply(h,d);m=0;l=Object.keys(k);for(u=l.length;m<u;m++)-1!==Q.indexOf(l[m])?Object.defineProperty(h,l[m],K(k[l[m]],"filters"!==l[m])):k.pointers?void 0===k.pointers[l[m]]&&h.set(l[m],k[l[m]]):h.set(l[m],k[l[m]]);if(k.pointers)for(h.pointers||
Object.defineProperty(h,"pointers",K({},!1,!0)),m=0,l=Object.keys(k.pointers),u=l.length;m<u;m++)h.pointers[l[m]]=k.pointers[l[m]],h.addPointer(h.pointers[l[m]].point,h.pointers[l[m]].key,l[m]);m=0;l=Object.keys(h.filters);for(u=l.length;m<u;m++)h.filters[l[m]]=h.filters[l[m]].bind(h);if(h.sessionStorage){if(c=sessionStorage.getItem(h.id||b))for(c=JSON.parse(c),m=0,l=Object.keys(c),u=l.length;m<u;m++)h.set(l[m],c[l[m]]);else sessionStorage.setItem(h.id||b,h.stringify());h.addChildDataUpdateListener("*",
function(){sessionStorage.setItem(h.id||b,h.stringify())})}if(h.localStorage){if(c=localStorage.getItem(h.id||b))for(c=JSON.parse(c),m=0,l=Object.keys(c),u=l.length;m<u;m++)h.set(l[m],c[l[m]]);else localStorage.setItem(h.id||b,h.stringify());h.addChildDataUpdateListener("*",function(){localStorage.setItem(h.id||b,h.stringify())})}h.store&&S.set(h.id||b,h);return h}function x(b,c,d){b.kb_viewmodel=d;c.wrapper.innerHTML=M.insert(c.template,d);var g=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=g;Object.keys(g).forEach(function(b){g[b].forEach(function(b){switch(b.type){case "for":b.connect(d).createloop();
break;case "component":b.connect(d).unsync();break;default:b.connect(d)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function w(e,f){t=new M(f,!0);Object.defineProperty(t.wrapper,"__kbcomponenttree",K(f.kb_mapper?f.kb_mapper.__kbcomponenttree.slice():[]));f.parentElement.replaceChild(t.fragment,f);p.unshift(t.wrapper);x(t.wrapper,t,y(e,J[e],p,d,b));if(-1===t.wrapper.__kbcomponenttree.indexOf(e)||t.wrapper.kb_viewmodel.multiple){t.wrapper.__kbcomponenttree.push(e);t.wrapper.className+=
" "+t.wrapper.kb_viewmodel.local;t.wrapper.className+=t.wrapper.kb_viewmodel.loopid?" "+t.wrapper.kb_viewmodel.loopid:"";for(var h=t.wrapper.querySelectorAll("*"),g=0,k=h.length;g<k;g++)h[g]instanceof HTMLUnknownElement&&c(h[g])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
e),console.error("Recursive Component %o on %o",t.wrapper,t.wrapper.parentElement),t.wrapper.parentElement.removeChild(t.wrapper)}var q=h.tagName.toLowerCase(),t,k=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}),d={},b={};void 0===p&&(p=[]);l&&P(l,d);Object.defineProperty(d,"local",K(d.local||q+"-"+Date.now(),!0,!1,!0));Object.defineProperty(d,"filters",K(d.filters||{},!1,!1,!0));"function"!==typeof d.onFinish&&(d.onFinish=function(){});Object.defineProperty(d,"onFinish",
K(d.onFinish,!0,!1,!0));"string"===typeof d.sessionStorage&&(d.sessionStorage="true"===d.sessionStorage);Object.defineProperty(d,"sessionStorage",K(void 0!==d.sessionStorage?d.sessionStorage:!1,!0,!1,!0));"string"===typeof d.localStorage&&(d.localStorage="true"===d.localStorage);Object.defineProperty(d,"localStorage",K(void 0!==d.localStorage?d.localStorage:!1,!0,!1,!0));"string"===typeof d.store&&(d.store="true"===d.store);Object.defineProperty(d,"store",K(void 0!==d.store?d.store:!1,!0,!1,!0));
"string"===typeof d.multiple&&(d.multiple="true"===d.multiple);Object.defineProperty(d,"multiple",K(void 0!==d.multiple?d.multiple:!1,!0,!1,!0));v&&P(v,b);b.innerHTML=Array.prototype.slice.call(h.childNodes);l=0;for(v=h.attributes.length;l<v;l++)b[h.attributes[l].name]=h.attributes[l].value;l=0;for(v=k.length;l<v;l++)h[k[l]]&&(b[k[l]]=h[k[l]]);h.k_post&&P(h.k_post,b);c.isRegistered(q)||h.kb_isLoading?c.isRegistered(q)&&w(q,h):(c.loadWaitList(q,function(b,c){w(q,h)}),c.loadWaitList(q).loading||(c.loadWaitList(q).loading=
!0,I(q)))}function P(c,h){var l=Object.keys(c);h.pointers||Object.defineProperty(h,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var p=0,y=l.length;p<y;p++)if(F.prototype.isObservable(c,l[p]))h.pointers[l[p]]={key:c.__kbscopeString.split(".").pop(),point:c.__kbImmediateParent};else if(F.prototype.isMixed(c[l[p]]))h.pointers[l[p]]={key:c[l[p]].__kbscopeString.split(".").pop(),point:c[l[p]].__kbImmediateParent};else if(F.prototype.isObject(c[l[p]]))for(var x=0,w=Object.keys(c[l[p]]);x<
y;x++)h[l[p]][w[x]]=c[l[p]][w[x]];else if(F.prototype.isArray(c[l[p]]))for(x=0;x<y;x++)h[l[p]][x]=c[l[p]][x];else h[l[p]]=c[l[p]]}function K(c,h,l,p){return{value:c,writable:!!h,enumerable:!!p,configurable:!!l}}window.K_Components||(window.K_Components={});var I=l().onLoad(function(h,l){var p="<style>"+unescape(l.prototype.k_css)+"</style>"+unescape(l.prototype.k_html);c.register(h,l,p,l.prototype.cms);c.loadWaitList(h).forEach(function(c){c(h,l)});c.loadWaitList(h,"clear")}),F=D(),H=p||{},M=z().addEventListener("loopitem",
function(h){var l=h.node.tagName.toLowerCase();c.isRegistered(l)||h.node.kb_isLoading?c.isRegistered(l)&&c(h.node):(h.node.kb_isLoading=!0,c.loadWaitList(l,function(l,p){c(h.node)}),c.loadWaitList(l).loading||(c.loadWaitList(l).loading=!0,I(l)))}),R=N().base(void 0!==H.base?H.base:"default").watch(!0).onChange(function(h){c(document.querySelector(h))}),S=F({},"Model"),J={},A=function(){return window.location.search.replace("?","").split("&").filter(function(c){return 0!==c.length}).reduce(function(c,
h){c[h.split("=")[0]]=h.split("=")[1];return c},{})}(),Q="id filters class sessionStorage localStorage store component multiple".split(" "),h={},L;c.register=function(h,l,p,v){M.register(h,p);J[h]=l;return c};c.isRegistered=function(c){return void 0!==J[c]&&M.isRegistered(c)};c.registered=function(){return Object.keys(J)};c.loadWaitList=function(l,p){if("undefined"===typeof p&&l)return h[l];if(l){if(void 0===h[l]||"clear"===p){var C=void 0===h[l]?!1:!!h[l].loading;h[l]=[];h[l].loading=C}"function"===
typeof p&&h[l].push(p)}return c};c.localRouting=function(h){h?(L=Node.prototype.appendChild,Node.prototype.appendChild=function(c){if("script"===c.nodeName.toLowerCase()){c.src=c.src.substring(0,-1!==c.src.indexOf("?")?c.src.indexOf("?"):c.src.length);var h=c.src.match(/(.*?component\/)/);h&&(A.env||(A.env="prod"),"dev"===A.env&&(A.env="qa"),h=c.src.replace(h[0],"").replace(/[\/\s]/g,""),c.src=(void 0!==H.prefix?H.prefix:"")+"/components/"+h+"/build/"+A.env+"/"+h+(A.debug&&"prod"!==A.env?"":".min")+
".js",arguments[0]=c)}return L.apply(this,arguments)}):L&&(Node.prototype.appendChild=L,L=null);return c};c.hashRouting=function(c){c&&(void 0===document.body?document.addEventListener("DOMContentLoaded",function(){R(window.location.hash.replace("#",""))}):R(window.location.hash.replace("#","")))};return c}}(V,W,U,X,Y);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return T}):"undefined"!==typeof module&&(module.exports=T);
return T}();
