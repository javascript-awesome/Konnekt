var Konnekt=function(){var X=function(){return function(D,u,A,r){function C(c,b,g,l){c=void 0===c?{}:c;var m={},B=window.Proxy?new Proxy(m,{set:L,deleteProperty:O}):m,f=Object.keys(c,"all");Object.defineProperties(m,{__kbname:d("string"===typeof b?b:"default",!0,!0),__kbref:d(g?g.__kbref||g:B,!0,!0),__kbscopeString:d(l||"",!0,!0),__kbImmediateParent:d(g||null,!0,!0),__kbsubscribers:d({}),__kbparentsubscribers:d({}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),
__kbcreatelisteners:d([]),__kbdeletelisteners:d([]),__kbparentcreatelisteners:d([]),__kbparentdeletelisteners:d([]),__kbmethodlisteners:d([]),__kbmethodupdatelisteners:d([]),__kbpointers:d({}),__kbevents:d(U),__kbsetindex:d(0,!0),__kbproto:d({}),length:d(0,!0),__kbnonproxy:d(m,!1,!0),__kbproxy:d(B,!1,!0),_stopChange:d(!1,!0)});m.__proto__=C.prototype;b=0;for(g=f.length;b<g;b++)B.set(f[b],c[f[b]]);m.__kbevents.addlistener=[];m.__kbevents.removelistener=[];m.addActionListener("addlistener",function(b){if("string"===
typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],g=g.point.getLayer(g.keys);if(void 0!==g[b.arguments[0]])g[b.arguments[2]](b.arguments[0],b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],g=g.point.getLayer(g.keys);if(void 0!==g[b.arguments[0]])g[b.arguments[2]](b.arguments[0],b.arguments[1])}});
return B}function q(c,b,g,l,m,B,f,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=c;this.key=b;this.arguments=B;this.type=this.event=g;this.listener=f;this.name=c.__kbname;this.root=c.__kbref;this.scope=c.__kbscopeString;this.parent=c.__kbImmediateParent;this.value=l;this.oldValue=m;this.stopChange=e}function d(c,b,g,l){return{value:c,writable:!!b,enumerable:!!l,configurable:!!g}}function S(c,b,g){return{get:function(){return c.call(this)},
set:function(g){b&&(c=g)},enumerable:!1,configurable:!!g}}function R(c,b){var g=b,l=b;return{get:function(){return g},set:function(b){var B=new q(this,c,"set",b,g,arguments,"__kblisteners",this._stopChange);!0!==f(B)&&(l=g,g=b,B.stopChange||(B.listener="__kbupdatelisteners",B.type="postset",f(B)),this.callSubscribers(this.__kbref,this,c,g,l,this._stopChange));this._stopChange=!1},configurable:!0,enumerable:!0}}function Q(){var c=Array.prototype.slice.call(arguments),b=c.shift();return{get:function(){return c.reduce(function(b,
c){return b[c]},b)},set:function(g){var l=c.slice(0,c.length-1).reduce(function(b,g){return b[g]},b);(this._stopChange?l.stopChange():l)[c[c.length-1]]=g;this._stopChange=!1},enumerable:!0,configurable:!0}}function G(c,b){for(var g=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],
l=[],m,B=0,f=g.length;B<f;B++)if(m=c[g[B].listener],E.call(m))for(var l=Object.keys(m),e=0,h=l.length;e<h;e++)for(var k=0,d=m[l[e]].length;k<d;k++)b[g[B].method](l[e],m[l[e]][k]);else for(e=0,h=m.length;e<h;e++)b[g[B].method](m[e])}function L(c,b,g){if(J(c,b)||"length"===b||"__kbsetindex"===b){if("length"===b)if(g>c.length&&void 0!==c[g-1])c.length=g;else{if(g<c.length){b=g;for(var l=c.length;b<l;b++)c[b]&&delete c[b];c.length=g}}else c[b]=g;return!0}c.set(b,g)}function O(c,b){c.del(b);return!0}function P(c,
b,g){var l=n(g),m=E(g),B=I(g);if(l&&g.__kbname!==c.__kbname)"default"===g.__kbname?c.merge(g,b):c.__kbpointers[b]||c.addPointer(g,b);else{var l=new q(this,b,"create",g,void 0,[],"__kbcreatelisteners",this._stopChange),e=f(l),h=parseInt(b,10);if(!0!==e)if((m||B)&&0!==Object.keys(g,"all").length)for(P.call(this,c,b,{}),m=0,B=Object.keys(g,"all"),l=B.length;m<l;m++)P.call(this[b],c[b],B[m],g[B[m]]);else{if(m||B)g=new C(g,c.__kbname,c,c.__kbscopeString+(0!==c.__kbscopeString.length?".":"")+b),G(c,g);
Object.defineProperty(c,b,R(b,g));!isNaN(h)&&c.length<=h&&(c.length=h+1);l.listener="__kbupdatelisteners";l.type="postcreate";f(l)}}}function M(c,b,g,l){var m=n(g),B=E(g),f=I(g);if(m&&g.__kbname!==c.__kbname)"default"===g.__kbname?c.merge(g,b):c.__kbpointers[b]||c.addPointer(g,b);else if(void 0===c[b])-1===N.indexOf(b)?P.call(this,c,b,g):(l?c.stopChange():c)[b]=g;else if(B||f)for(m=0,B=Object.keys(g,"all"),f=B.length;m<f;m++)M.call(this[b],c[b],B[m],g[B[m]],l);else(l?c.stopChange():c)[b]=g}function H(c){return k.call(c).replace(/(\[object\s|\])/g,
"").toLowerCase()}function E(c){return"object"===H(void 0!==c?c:this)}function I(c){return"array"===H(void 0!==c?c:this)}function n(c){return"mixed"===H(void 0!==c?c:this)}function J(c,b){b="string"===typeof c?c:b;var g=Object.getOwnPropertyDescriptor("string"===typeof c?this:c,b);return g?void 0===g.value:!1}function K(c,b){function g(b){var g=parseFloat(b,10),c="true"===b,l=b.indexOf('"'),m=b.lastIndexOf('"');if(isNaN(g)||g.toString().length!==b.length){if(c||"false"===b)return c;b=0===l&&0!==m?
b.substring(1,b.length-1):b.substring(1,b.length)}else return g;return b}var l=this.__kbnonproxy;split=c.split(/({"|,"(?=(?:[^"]|"[^"]*")*$)|\[(?=(?:[^"]|"[^"]*")*$)|\](?=(?:[^"]|"[^"]*")*$)|":|"}|{(?=(?:[^"]|"[^"]*")*$)|,(?=(?:[^"]|"[^"]*")*$)|}(?=(?:[^"]|"[^"]*")*$))/).filter(Boolean);UKeys=[];isValue=isKey=!1;r="";for(var m=1,B=split.length,f,e,h,k;m<B;m++)f=split[m],e=split[m-1],h=split[m+1],k=UKeys[UKeys.length-1],'":'===e&&'{"'===f||'":'===e&&"["===f?(r+=(0!==r.length?".":"")+k,l[k]||l.set(k,
b?b(k,{},r,l):{}),l=l[k],UKeys.pop()):"["===e||","===e&&0!==l.length?"{"===f||'{"'===f?(r+=(0!==r.length?".":"")+l.__kbsetindex,"object"!==typeof l[l.__kbsetindex]&&l.set(l.__kbsetindex,b?b(l.length,{},r,l):{}),l.__kbsetindex+=1,l=l[l.__kbsetindex-1]):(l.set(l.__kbsetindex,b?b(l.length,g(f),r,l):g(f)),l.__kbsetindex+=1):'":'===e?(l.set(k,b?b(k,g(f),r,l):g(f)),UKeys.pop()):'{"'===e||","===e&&'":'===h?UKeys[UKeys.length]=f.replace(/\"/g,""):"}"!==e&&"]"!==e||void 0===f||(r=-1!==r.indexOf(".")?r.substring(0,
r.lastIndexOf(".")-1):"",l=l.__kbImmediateParent);return this}function F(c,b){"number"===typeof c&&(c=c.toString());var g=-1!==c.indexOf(".")?this.__kbnonproxy.setLayer(c):this.__kbnonproxy;-1!==c.indexOf(".")&&(c=c.split(".").pop());var l=new q(this,c,"set",b,this[c],arguments,"__kbmethodlisteners");!0!==f(l)&&(M.call(this,g,c,b,this._stopChange),this.stopChange=void 0,l.type="postset",l.listener="__kbmethodupdatelisteners",f(l));return this}function z(c){return c.split(".")}function p(c,b){return function(g,
l){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var m=this[b],e=new q(this,b,"addlistener",m,void 0,arguments,"");"string"===typeof g&&1!==z(g).length&&(m=z(g),g=m.pop(),m=m.join("."),e.local=this.getLayer(m),m=e.local[b],e.value=m);!0!==f(e)&&(E.call(m)?(void 0===m[g]&&(m[g]=[]),m[g].push(l),e.type="postaddlistener",f(e)):I.call(m)&&"function"===typeof g&&(m.push(g),e.type="postaddlistener",f(e)));return this}}function t(c,b){return function(g,l){arguments=Array.prototype.slice.call(arguments);
arguments.push(c);var m=this[b],e=new q(this,b,"removelistener",m,void 0,arguments,"");"string"===typeof g&&1!==z(g).length&&(m=z(g),m.pop(),m.join("."),e.local=this.getLayer(m),m=e.local[b],e.value=m,g=z(g).pop());if(!0!==f(e))if(E.call(m)){if(void 0!==m[g])for(var h=0,k=m[g].length;h<k;h++)if(m[g][h].toString()===l.toString()){m[g].splice(h,1);e.type="postremovelistener";f(e);break}}else if(I.call(m)&&"function"===typeof g)for(h=0,k=m.length;h<k;h++)if(m[h].toString()===g.toString()){m.splice(h,
1);e.type="postremovelistener";f(e);break}return this}}function y(c,b){function g(b,c,e){var f=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),h=this,k=b;"string"===typeof b&&1!==z(b).length&&(h=z(b),k=h.pop(),h=h.join("."),h=this.getLayer(h),void 0===h[e][k]&&(h[e][k]=[]),h[e][k].push(c));E.call(h[e])?(void 0===h[e][k]&&(h[e][k]=[]),h[e][k].push(c),h=h.__kbpointers[k],h=h.point.getLayer(h.keys),void 0!==h[k]&&(void 0===h[e][k]&&(h[e][k]=[]),h[e][k].push(_func))):h[e].push(c);
k=0;for(h=f.length;k<h;k++)g.call(this[f[k]],b,c,e)}return function(l,m){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var e=new q(this,b,"addchildlistener",void 0,void 0,arguments,"");!0!==f(e)&&(g.call(this.__kbnonproxy,l,m,b),e.type="postaddchildlistener",f(e));return this}}function w(c,b){function g(b,c,e){var f=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),h=this,k=b;if("string"===typeof b&&1!==z(b).length){var d=z(b),k=d.pop();d.join(".");
h=this.getLayer(d);if(void 0!==h[e][b])for(var d=0,p=h[e][b].length;d<p;d++)if(h[e][b][d].toString()===c.toString()){h[e][b].splice(d,1);break}}if(E.call(h[e])){if(void 0!==h[e][k]){d=0;for(p=h[e][k].length;d<p;d++)if(h[e][k][d].toString()===c.toString()){h[e][k].splice(d,1);break}if(-1!==h.__kbpointers.indexOf(k)&&(d=h.__kbpointers[k],h=d.point.getLayer(d.keys),void 0!==h[e][k]))for(d=0,p=h[e][k].length;d<p;d++)if(h[e][k][d].toString()===c.toString()){h[e][k].splice(d,1);break}}}else for(d=0,p=h[e].length;d<
p;d++)if(h[e][d].toString()===c.toString()){h[e].splice(d,1);break}d=0;for(p=f.length;d<p;d++)g.call(this[f[d]],b,c,e)}return function(l,m){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var e=new q(this,b,"removechildlistener",void 0,void 0,arguments,"");!0!==f(e)&&(g.call(this.__kbnonproxy,l,m,b),e.type="postremovechildlistener",f(e));return this}}var U={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],
shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},N=["__proto__","_stopChange"],v=function(c,b){if(!b._stopPropogration&&c)for(var g=0,l=c.length;g!==l&&(c[g](b),!b._stopPropogration);g++);},f=function(c){if(c.listener){var b=c.local[c.listener],g=c.local[c.listener.replace("__kb",
"__kbparent")];E.call(b)?(v(b[c.key],c),v(b["*"],c)):v(b,c);E.call(g)?(v(g[c.key],c),v(g["*"],c)):v(g,c)}v(c.local.__kbref.__kbevents[c.type],c);return c._preventDefault},e=Array.prototype.sort,h=Array.prototype.slice,k;Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof C?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(c,b){return Object._keys(c).filter(function(g){return b&&
"object"!==b&&"o"!==b?"all"===b?!0:!isNaN(parseInt(g,10)):isNaN(parseInt(g,10))})};k={}.toString;Object.defineProperties(C.prototype,{"typeof":d(H,!1,!0),sizeof:d(function(c){function b(c){for(var m=Object.keys(c,"all"),e=0,f=void 0,h=0,k=m.length;h<k;h++)f=c[m[h]],"object"===typeof f&&void 0!==f&&null!==f?-1===g.indexOf(f)&&(g.push(f),e+=b(f)):"string"===typeof f?e+=2*f.length:"number"===typeof f?e+=8:"boolean"===typeof f?e+=4:"function"===typeof f&&(e+=2*f.toString().length),e+=2*m[h].length;return e}
var g=[];return b(c||this)+" Bytes (Rough estimate)"},!1,!0),isObject:d(E,!1,!0),isArray:d(I,!1,!0),isMixed:d(n,!1,!0),isObservable:d(J,!1,!0),stringify:d(function(c){var b=[];return JSON.stringify(c||this,function(g,c){if(I(c)||E(c)){if(-1!==b.indexOf(c))return;b.push(c)}return c})},!1,!0),getKeys:d(function(c,b){b="string"===typeof c?c:b?b:"object";return Object.keys("string"===typeof c||void 0===c?this:c,b)},!1,!0),getIndexes:d(function(c){c=void 0!==c?"object"===typeof c?c:this[c]:this;for(var b=
[],g=0,l=c.length;g<l;g++)void 0!==c[g]&&(b[b.length]=g);return b},!1,!0),keyCount:S(function(){return this.getKeys("object").length},!1,!0),indexCount:S(function(){return this.length},!1,!0),count:S(function(){return this.keyCount+this.indexCount},!1,!0),concat:d(Array.prototype.concat),every:d(Array.prototype.every),filter:d(Array.prototype.filter),find:d(Array.prototype.find),findIndex:d(Array.prototype.findIndex),forEach:d(Array.prototype.forEach),includes:d(Array.prototype.includes),indexOf:d(Array.prototype.indexOf),
join:d(Array.prototype.join),lastIndexOf:d(Array.prototype.lastIndexOf),map:d(Array.prototype.map),reduce:d(Array.prototype.reduce),reduceRight:d(Array.prototype.reduceRight),slice:d(Array.prototype.slice),some:d(Array.prototype.some),entries:d(Array.prototype.entries),toLocaleString:d(Array.prototype.toLocaleString),parse:d(K,!0),parseReplace:d(function(c,b){return K.call(b||this,c)},!0),add:d(function(c,b){F.call(this,c,b);return this}),set:d(F),get:d(function(c){"number"===typeof c&&(c=c.toString());
var b=-1!==c.indexOf(".")?this.getLayer(c):this;-1!==c.indexOf(".")&&(c=c.split(".").pop());if(b)return b[c];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,c)}),del:d(function(c,b){var g="number"===typeof c||!isNaN(parseInt(c,10));g&&(c=c.toString());var l=-1!==c.indexOf(".")?this.getLayer(c):this,e=c.split(".").pop();if(l&&void 0!==l[e])if(g&&l.length>parseInt(c,10)&&!b)l=l.__kbnonproxy,l.splice(e,1);else{var h=new q(l,c,"delete",l[e],void 0,[],"__kbmethodlisteners"),
k=f(h),p=new q(l,c,"delete",l[e],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==f(p)&&!0!==k&&(l=l.__kbnonproxy,Object.defineProperty(l,e,d(void 0,!0,!0,!1)),delete l[e],g&&l.length>parseInt(c,10)&&b&&--l.length,h.type="postdelete",h.listener="__kbmethodupdatelisteners",f(h),p.listener="__kbupdatelisteners",p.type="postdelete",p.oldValue=p.value,p.value=void 0,f(p))}return this}),exists:d(function(c){var b=-1!==c.indexOf(".")?this.__kbnonproxy.getLayer(c):this.__kbnonproxy;-1!==c.indexOf(".")&&
(c=c.split(".").pop());return b?void 0!==b[c]:!!b}),addPrototype:d(function(c,b){var g=-1!==c.indexOf(".")?this.__kbnonproxy.setLayer(c):this.__kbnonproxy;-1!==c.indexOf(".")&&(c=c.split(".").pop());void 0===g[c]?Object.defineProperty(g.__proto__,c,d(b,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,g);return this}),addPointer:d(function(){var c=Array.prototype.slice.call(arguments),b=c.shift(),g=c[c.length-1];b instanceof C||(b=new C(b,
b.__kbname));var l=new q(this,g,"create",b[g],void 0,[],"__kbcreatelisteners",this._stopChange),e=this.__kbnonproxy;l.root=b.__kbref.__kbproxy;if(!0!==f(l)){Object.defineProperty(e,g,Q.apply(e,arguments));e.__kbpointers[g]={keys:c.join("."),point:b};var c=e,b=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],h;if(c[g].__kbImmediateParent)for(var k=0,d=b.length;k<d;k++){h=c[b[k].listener];for(var e=Object.keys(h),p=0,t=e.length;p<
t;p++)if(g===e[k])for(var y=0,n=h[e[k]].length;y<n;y++)void 0===c[g].__kbImmediateParent[b[k].listener][g]&&(c[g].__kbImmediateParent[b[k].listener][g]=[]),c[g].__kbImmediateParent[b[k].listener][g].push(h[e[k]][y])}G(c,c[g]);l.listener="__kbupdatelisteners";l.type="postcreate";f(l)}return this}),move:d(function(c,b){this.__kbnonproxy.set(b,c[b]);n(c)?c.del(b):(c[b]=null,delete c[b]);return this}),copy:d(function(c,b){var g=this.__kbnonproxy;n(c)?"default"===c.__kbname?g.merge(c[b],b):g.addPointer(c,
b):g.set(b,c[b]);return this}),merge:d(function(c,b){function g(b,c){for(var e=n(b)?b.keys("object"):Object.keys(b),m,f=0,h=e.length;f<h;f++)m=b[e[f]],"object"===typeof m&&-1===l.indexOf(m)&&"undefined"!==c[e[f]]?g(m,c):void 0===c[e[f]]&&c.set(e[f],"object"===typeof m?{}:m)}var l=[],e=this.__kbnonproxy;b&&void 0===e[b]&&e.set(b,{});g(c,b?e[b]:e);return this}),replace:d(function(c,b){function g(b,c){var e=n(b)?b.keys("object"):Object.keys(b),m;m=b[e[x]];"object"===typeof m&&-1===l.indexOf(m)&&"undefined"!==
c[e[x]]?g(m,c):c.set(e[x],"object"===typeof m?{}:m)}var l=[],e=this.__kbnonproxy;b&&void 0===e[b]&&e.set(b,{});g(c,b?e[b]:e);return this}),copyWithin:d(function(c,b,g){b=b||0;g=g||0;var l=new q(this,c,"copyWithin",this[c],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==f(l)&&c<e.length){c=0>c?e.length-1:c;b=b<e.length?b:e.length-1;g=g<e.length?g:e.length-1;b=0>b?e.length-1:b;g=0>b?e.length-1:g;for(var h=b;h<=g;h++)e.set(c+(h-b),e[h]);l.type="postcopyWithin";l.listener="__kbmethodupdatelisteners";
f(l)}return this}),fill:d(function(c,b,g){b=void 0!==b?Math.max(0,b):0;g=void 0!==g&&g<=this.length?Math.min(this.length,Math.max(0,g)):this.length;var e=new q(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),m=this.__kbnonproxy;if(!0!==f(e)){for(var h=a.key;h<g;h++)m[h]=c;e.type="postfill";e.listener="__kbmethodupdatelisteners";f(e)}return this}),pop:d(function(){var c=new q(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;
if(!0!==f(c)){var g=b[b.length-1];b.del(this.length-1);c.type="postpop";c.listener="__kbmethodupdatelisteners";f(c);return g}return null}),push:d(function(c){var b=new q(this,this.length,"push",c,void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;!0!==f(b)&&(g.set(g.length,c),b.type="postpush",b.listener="__kbmethodupdatelisteners",f(b));return this.length}),reverse:d(function(){var c=new q(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=
null,e=null,m=b.length,g=0;g<m/2;g+=1){var e=m-1-g,h=b[g];b[g]=b[e];b[e]=h}c.type="postreverse";c.listener="__kbmethodupdatelisteners";f(c)}return this}),shift:d(function(){var c=new q(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=a.key,e=this.length-1;g<e;g++)b[g]=b[g+1];b.del(this.length-1);c.type="postshift";c.listener="__kbmethodupdatelisteners";f(c)}return null}),sort:d(function(){var c=new q(this,void 0,"sort",void 0,void 0,arguments,
"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){var g=h.call(b);e.apply(g,arguments);for(var l=0,m=g.length;l<m;l++)b[l]=g[l];c.type="postsort";c.listener="__kbmethodupdatelisteners";f(c)}return this}),splice:d(function(c,b,g){c="string"===typeof c?parseInt(c,10):c;var e=new q(this,c,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),m=this.__kbnonproxy;if(!0!==f(e)){var h=[],k=Array.prototype.slice.call(arguments,2),d=k.length-2,p=0;if(0!==b&&void 0!==m[c-1+b])for(var y=0,t=b;y<t;y++){h.push(m[c+
y]);for(var n=c+y,w=this.length-1;n<w;n++)m[n]=m[n+1];m.del(m.length-1,!0)}if(0!==d)for(y=0,t=d;y<t;y++){p=c+Math.min(1,y);n=m.length;for(w=p;n>w;n--)m.set(n,m[n-1]);m.set(p,k[y])}e.type="postsplice";e.listener="__kbmethodupdatelisteners";f(e);return h}return[]}),unshift:d(function(){var c=new q(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=Array.prototype.slice.call(arguments),e=b.length-1+g.length,m=g.length;-1!==e;e--)e<m?b.set(e,g[e]):
b.set(e,b[e-g.length]);c.type="postunshift";c.listener="__kbmethodupdatelisteners";f(c)}return this.length}),getLayer:d(function(c){function b(g){var c=g[0];return void 0===this[c]&&0!==g.length-1?null:n(this[c])?0!==g.length-1?(g.shift(),b.call(this[c],g)):this[c]:this}c=z(c);return b.call(this,c)}),setLayer:d(function(c){function b(g){var c=g[0];void 0===this[c]&&0!==g.length-1&&(this[c]=C({},this.__kbname,this,this.__kbscopeString+"."+c));return n(this[c])?0!==g.length-1?(g.shift(),b.call(this[c],
g)):this[c]:this}c=z(c);return b.call(this,c)}),ignoreCreate:d(function(c){-1===N.indexOf(c)&&N.push(c);return this}),addActionListener:d(function(c,b){var g=this.__kbnonproxy;void 0!==g.__kbref.__kbevents[c]&&g.__kbref.__kbevents[c].push(b);return this}),removeActionListener:d(function(c,b){var g=this.__kbnonproxy;if(void 0!==g.__kbref.__kbevents[c])for(var e=0,m=g.__kbref.__kbevents[c];e<m;e++)if(g.__kbref.__kbevents[c][e].toString()===b.toString()){g.__kbref.__kbevents[c].splice(e,1);break}return this}),
subscribe:d(function(c,b){var g=c.split("."),e=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;void 0===g.__kbsubscribers[e]&&(g.__kbsubscribers[e]=[]);g.__kbsubscribers[e].push(b);return this}),unsubscribe:d(function(c,b){var g=c.split("."),e=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;if(void 0!==g.__kbsubscribers[e])for(var m=0,f=g.__kbsubscribers[e].length;m<f;m++)if(g.__kbsubscribers[e][m].toString()===b.toString()){g.__kbsubscribers[e].splice(m,
1);break}return this}),subscribeDeep:d(function(c,b){function g(c,e){var l=Object.keys(c,"all").filter(function(b){return n.call(c[b])}.bind(c));if(void 0!==c[e]||"*"===e)void 0===c.__kbparentsubscribers[e]&&(c.__kbparentsubscribers[e]=[]),c.__kbparentsubscribers[e].push(b);for(var f=0,m=l.length;f<m;f++)g(c[l[f]],e)}var e=-1!==c.indexOf("*"),m=c.split(".");m.slice(0,m.indexOf("*"));var f=-1!==m.indexOf("*")?m.slice(m.indexOf("*"),m.length):[],h=1===f.length,k=m.pop(),m=0!==m.length?this.__kbnonproxy.getLayer(m.join(".")):
this.__kbnonproxy;e?h?g(m,"*"):(f.shift(),m.subscribeDeep(f.join("."),b)):g(m,k);return this}),unsubscribeDeep:d(function(c,b){function g(c,e){var l=Object.keys(c,"all").filter(function(b){return n.call(c[b])&&!(c[b]instanceof HTMLElement)}.bind(c));if((void 0!==c[e]||"*"===e)&&void 0!==c.__kbparentsubscribers[e])for(var f=0,h=c.__kbparentsubscribers[e].length;f<h;f++)c.__kbparentsubscribers[e][f].toString()===b.toString()&&c.__kbparentsubscribers[e].splice(f,1);f=0;for(h=l.length;f<h;f++)g(c[l[f]],
e)}var e=-1!==c.indexOf("*"),f=c.split(".");f.slice(0,f.indexOf("*"));var h=-1!==f.indexOf("*")?f.slice(f.indexOf("*"),f.length):[],k=1===h.length,d=f.pop(),f=0!==f.length?this.__kbnonproxy.getLayer(f.join(".")):this.__kbnonproxy;e?k?g(f,"*"):(h.shift(),f.unsubscribeDeep(h.join("."),b)):g(f,d);return this}),callSubscribers:d(function(c,b,g,e,f,h){var k=this.__kbnonproxy;if(void 0!==k.__kbsubscribers[g])for(var d=0,p=k.__kbsubscribers[g].length;d<p;d++)k.__kbsubscribers[g][d].call(this,{key:g,value:e,
oldValue:f,stopChange:h,local:b,kbref:c});if(void 0!==k.__kbparentsubscribers[g])for(d=0,p=k.__kbparentsubscribers[g].length;d<p;d++)k.__kbparentsubscribers[g][d].call(this,{key:g,value:e,oldValue:f,stopChange:h,local:b,kbref:c});if(void 0!==k.__kbsubscribers["*"])for(d=0,p=k.__kbsubscribers["*"].length;d<p;d++)k.__kbsubscribers["*"][d].call(this,{key:g,value:e,oldValue:f,stopChange:h,local:b,kbref:c});if(void 0!==k.__kbparentsubscribers["*"])for(d=0,p=k.__kbparentsubscribers["*"].length;d<p;d++)k.__kbparentsubscribers["*"][d].call(this,
{key:g,value:e,oldValue:f,stopChange:h,local:b,kbref:c});return this}),callAllSubscribers:d(function(){function c(b,g,c){for(var e=0,f=g.length;e<f;e++)g[e].call(b,{key:c,value:b[c],oldValue:b[c],stopChange:!1,local:b,kbref:b.__kbref,initial:!0})}(function(b){for(var g=Object.keys(b.__kbsubscribers),e=Object.keys(b.__kbparentsubscribers),f=0,h=g.length;f<h;f++)if(0!==b.__kbsubscribers[g[f]].length)if("*"===g[f])for(var k=0,d=Object.keys(b),p=d.length;k<p;k++)c(b,b.__kbsubscribers[g[f]],d[k]);else c(b,
b.__kbsubscribers[g[f]],g[f]);f=0;for(h=e.length;f<h;f++)if(0!==b.__kbparentsubscribers[e[f]].length)if("*"===e[f])for(k=0,d=Object.keys(b),p=d.length;k<p;k++)c(b,b.__kbparentsubscribers[e[f]],d[k]);else c(b,b.__kbparentsubscribers[e[f]],e[f])})(this.__kbnonproxy);return this}),stopChange:d(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(C.prototype,{addDataListener:d(p("addDataListener","__kblisteners")),removeDataListener:d(t("removeDataListener","__kblisteners")),
addDataUpdateListener:d(p("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:d(t("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:d(p("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:d(t("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:d(p("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:d(t("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:d(p("addDataMethodListener",
"__kbmethodlisteners")),removeDataMethodListener:d(t("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:d(p("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:d(t("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:d(y("addChildDataListener","__kbparentlisteners")),removeChildDataListener:d(w("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:d(y("addChildDataUpdateListener",
"__kbparentupdatelisteners")),removeChildDataUpdateListener:d(w("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:d(y("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:d(w("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:d(y("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:d(w("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return C}}(),
Y=function(){return function(){function D(r){if("object"===typeof r)for(var C=0,q=r.length;C<q;C++)K_Components[r[C]]?u(r[C],K_Components[r[C]],document.getElementById("script_"+r[C])):D.load(r[C],"component/"+r[C]+"/"+location.search,u);else"string"===typeof r&&(K_Components[r[C]]?u(r,K_Components[r],document.getElementById("script_"+r)):D.load(r,"component/"+r+"/"+location.search,u))}var u=function(){},A=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});D.getUnknowns=function(r){var u=
r.match(A);return u.map(function(q){return q.replace(/[<\/>]/g,"")}).filter(function(q,d){return document.createElement(q)instanceof HTMLUnknownElement&&-1===u.indexOf(q,d+1)&&!K_Components[q]})};D.load=function(r,u,q){document.head.appendChild(function(d,q,u){var r=document.createElement("script");r.type="text/javascript";r.charset="utf-8";r.async=!0;r.src=q;r.id="script_"+d;r.onload=function(){u(d,K_Components[d],this)};return r}(r,u,q));return D};D.onLoad=function(r){if(void 0===r)return u;u="function"===
typeof r?r:u;return D};return D}}(),W=function(){function D(){function u(f,e){var h=f.length,k;for(k=0;k<h&&(f[k](e),void 0===e._stopPropogation);k++);}function A(f,e){var h=f.length,k;for(k=0;k<h&&(e.child=e.target,e.target=f[k].parent,f[k].func(e),void 0===e._stopPropogation);k++);}function r(f,e){for(var h=f.length;0<h;U++)if(f[U].toString()===e.toString())return!0;return!1}function C(f,e,h,k,c,b,g,l){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=h;this.oldValue=k;this.target=f;this.attr=e;this.arguments=c;this.action=b;this.child=void 0;this.type=g;this.stopChange=l}function q(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function d(f,e,h,k){var c=f.get,b=f.set,g;return function(f){g=c.call(this);h(this,e,f,g,void 0,
this._stopChange)&&b.call(this,f);this._stopChange||k(this,e,f,g);this._stopChange=void 0}}function D(f,e,h,k){var c;return function(b){c=f.value;h(this,e,b,c,arguments,this._stopChange)&&(f.value=b);this._stopChange||k(this,e,b,c,arguments);this._stopChange=void 0}}function R(f,e,h,k){var c=f.value,b;return function(){h(this,e,null,null,arguments,this._stopChange)&&(b=c.apply(this,arguments));this._stopChange||k(this,e,null,null,arguments,b);this._stopChange=void 0;return b}}function Q(f,e,h,k,c){var b=
c.style,g=e.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),l,m;return{get:function(){return m},set:function(f){l=m;h(c,e,f,l,void 0,this._stopChange)&&(m=f,b.setProperty(g,f));this._stopChange||k(c,e,f,l);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(f,e,h,k){if("function"!==typeof e)return n;var c=-1!==["value","checked"].indexOf(f),b=-1!==y.indexOf(f),g;if(this.toString()!==n.toString())if(h){var l=this.querySelectorAll("*");h=l.length;for(var m,d=0;d<h;d++){m=l[d].attrListeners();
if(c||"*"===f)void 0!==l[d].addInputBinding&&l[d].addInputBinding(),void 0!==l[d].addInputBoxBinding&&l[d].addInputBoxBinding();if(b)n.injectStyleProperty(l[d],f),g=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===f){g=k?"_parentStyleUpdateListeners":"_parentStyleListeners";h=y.length;for(var p=0;p<h;p++)n.injectStyleProperty(l[d],y[p]);void 0===m[g]["*"]&&(m[g]["*"]=[]);m[g]["*"].push({parent:this,func:e})}g=k?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===m[g][f]&&
(m[g][f]=[]);m[g][f].push({parent:this,func:e})}}else{m=this.attrListeners();if(b)g=k?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,f);else{if(c||"*"===f)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===f){g=k?"_styleUpdateListeners":"_styleListeners";h=y.length;for(d=0;d<h;d++)n.injectStyleProperty(this,y[d]);void 0===m[g][f]&&(m[g][f]=[]);m[g][f].push(e)}g=k?"_attrUpdateListeners":"_attrListeners"}void 0===
m[g][f]&&(m[g][f]=[]);m[g][f].push(e)}else{if(c||"*"===f)for(p=document.querySelectorAll("input, textarea"),h=p.length,d=0;d<h;d++)void 0!==p[d].addInputBinding&&p[d].addInputBinding(),void 0!==p[d].addInputBoxBinding&&p[d].addInputBoxBinding();if(b){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));h=b.length+1;b.unshift(document.body);for(d=0;d<h;d++)n.injectStyleProperty(b[d],f);g=k?z:F}else{if("*"===f){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));h=b.length+
1;c=y.length;b.unshift(document.body);for(d=0;d<h;d++)for(p=0;p<c;p++)n.injectStyleProperty(b[d],y[p]);g=k?z:F;void 0===g[f]&&(g[f]=[]);g[f].push(e)}g=k?K:J}void 0===g[f]&&(g[f]=[]);g[f].push(e)}}function L(f,e,h,k){function c(b,c){var f=c[b],h=f.length;for(g=0;g<h;g++)f[g].toString()===e.toString()&&f.splice(g,1)}if("function"!==typeof e)return n;["value","checked"].indexOf(f);var b=-1!==y.indexOf(f),g;if(this.toString()!==n.toString())if(h){h=this.querySelectorAll("*");var l=h.length;b?(b=k?"_childStyleUpdateListeners":
"_childStyleListeners",c(f,this.attrListeners()[b]),b=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===f&&(b=k?"_childStyleUpdateListeners":"_childStyleListeners",c(f,this.attrListeners()[b])),b=k?"_childAttrUpdateListeners":"_childAttrListeners",c(f,this.attrListeners()[b]),b=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<l;g++){for(var d=h[g].attrListeners()[b][f],p=d.length,t=0;t<p;t++)d[t].isEqualNode(this)&&d.slice(t,1);if("*"===f)for(listenersStyle=k?"_parentStyleUpdateListeners":
"_parentStyleListeners",d=h[g].attrListeners()[b][f],p=d.length,t=0;t<p;t++)d[t].isEqualNode(this)&&d.slice(t,1)}}else b?b=k?"_styleUpdateListeners":"_styleListeners":("*"===f&&(b=k?"_styleUpdateListeners":"_styleListeners",c(f,this.attrListeners()[b])),b=k?"_attrUpdateListeners":"_attrListeners"),c(f,this.attrListeners()[b]);else b?b=k?z:F:("*"===f&&(b=k?z:F,c(f,b)),b=k?K:J),c(f,b)}function O(f,e){n.addAttrListener.call(this,f,e,!0);return this}function P(f,e){n.addAttrUpdateListener.call(this,f,
e,!0);return this}function M(f,e){n.removeAttrListener.call(this,f,e,!0);return this}function H(f,e){n.removeAttrUpdateListener.call(this,f,e,!0);return this}function E(f,e,h){var d=this.attrListeners();"html"===e&&(e="innerHTML");"events"===e&&(e="onclick");switch(f){case "attr":if(r(d._attrListeners[e],h))return!0;break;case "attrupdate":if(r(d._attrUpdateListeners[e],h))return!0}return!1}function I(){this._stopChange=!0;return this}function n(){function f(b,g){var c,e=g.length;for(c=0;c<e;c++)-1===
b.indexOf(g[c])&&b.push(g[c]);return b}function e(b,g){for(var c=Object.keys(b),e,f,h=0,d=c.length;h<d;h++)if(e=c[h],void 0===g[e])g[e]=b[e].slice();else for(var k=0,p=b[e].length;k<p;k++)f=b[e][k],g[e].push(f)}function h(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var g=b.target.attrListeners(),c,h=["value","checked"],d=g._attrListeners,k=g._attrUpdateListeners,p=g._parentAttrListeners;c=g._parentAttrUpdateListeners;var t=!1;if(void 0!==J["*"]||void 0!==K["*"])t=!0;if(!0!==t&&void 0!==d["*"]||
void 0!==k["*"]||void 0!==p["*"]||void 0!==c["*"])t=!0;if(!0!==t)for(var w=0;w<h.length;w++)if(void 0!==J[h[w]]||void 0!==K[h[w]]||void 0!==d[h[w]]||void 0!==k[h[w]]||void 0!==p[h[w]]||void 0!==c[h[w]]){t=!0;break}c=t;h=Object.keys(F);d=Object.keys(z);Object.keys(g._styleListeners);Object.keys(g._styleUpdateListeners);k=Object.keys(g._parentStyleListeners);g=Object.keys(g._parentStyleUpdateListeners);p=[];if(0!==h.length||0!==d.length)p=f(p,h),p=f(p,d);if(0!==p.length&&0!==k.length||0!==g.length)p=
f(p,k),p=f(p,g);-1!==p.indexOf("*")&&(p=y);var g=p,h=g.length,q,r,d=[],v,k="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,p=b.target;void 0!==k&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(c){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(d=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||d.unshift(b.arguments[0])):d=
Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));v=d.length;for(var u=0;u<v;u++)void 0!==d[u].addInputBinding&&d[u].addInputBinding(),void 0!==d[u].addInputBoxBinding&&d[u].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(d=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),d.unshift(b.arguments[0])):d=Array.prototype.slice.call(b.target.querySelectorAll("*"));c=b.target.__kb._parentAttrListeners;
t=b.target.__kb._parentAttrUpdateListeners;w=b.target.__kb._parentStyleListeners;q=b.target.__kb._parentStyleUpdateListeners;v=d.length;for(u=0;u<v;u++){if(0!==h)for(r=0;r<h;r++)n.injectStyleProperty(d[u],g[r]);r=d[u].attrListeners();e(c,r._parentAttrListeners);e(t,r._parentAttrUpdateListeners);e(w,r._parentStyleListeners);e(q,r._parentStyleUpdateListeners)}void 0!==k&&(b.attr=k,b.target=p,b.arguments=[])}}function d(g){var c=g.target.attributes[g.arguments[0]],e="setAttribute"===g.attr?g.arguments[1]:
"";b(g.target,g.arguments[0],e,void 0!==c?c.value:"",[e])||g.preventDefault()}function c(b){var c=b.target.attributes[b.arguments[0]],e="setAttribute"===b.attr?b.arguments[1]:"";g(b.target,b.arguments[0],e,void 0!==c?c.value:"",[e])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");
var b=N,g=v;n.addAttrUpdateListener("appendChild",h);n.addAttrUpdateListener("removeChild",h);n.addAttrUpdateListener("innerHTML",h);n.addAttrUpdateListener("outerHTML",h);n.addAttrUpdateListener("innerText",h);n.addAttrUpdateListener("outerText",h);n.addAttrUpdateListener("textContent",h);n.addAttrListener("setAttribute",d);n.addAttrListener("removeAttribute",d);n.addAttrUpdateListener("setAttribute",c);n.addAttrUpdateListener("removeAttribute",c);return n}var J={},K={},F={},z={},p={},t="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
y=Object.getOwnPropertyNames(document.documentElement.style),w=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}).concat(["addEventListener","removeEventListener"]),U,N=function(f,e,h,d,c,b){h=new C(f,e,h,d,c,void 0,"set",b);void 0!==f.__kb&&(d=f.__kb._attrListeners,c=f.__kb._styleListeners,b=f.__kb._parentAttrListeners,f=f.__kb._parentStyleListeners,void 0!==d[e]&&u(d[e],h),void 0===h._stopPropogation&&void 0!==c[e]&&u(c[e],h),void 0===h._stopPropogation&&void 0!==
d["*"]&&(u(d["*"],h),void 0===h._stopPropogation&&u(c["*"],h)),void 0===h._stopPropogation&&void 0!==b[e]&&A(b[e],h),void 0===h._stopPropogation&&void 0!==f[e]&&A(f[e],h),void 0===h._stopPropogation&&void 0!==b["*"]&&(A(b["*"],h),void 0===h._stopPropogation&&A(f["*"],h)));void 0===h._stopPropogation&&void 0!==J[e]&&u(J[e],h);void 0===h._stopPropogation&&void 0!==F[e]&&u(F[e],h);void 0===h._stopPropogation&&void 0!==J["*"]&&(u(J["*"],h),void 0===h._stopPropogation&&u(F["*"],h));return void 0!==h._preventDefault?
!1:!0},v=function(f,e,h,d,c,b){h=new C(f,e,h,d,c,b,"update");void 0!==f.__kb&&(d=f.__kb._attrUpdateListeners,c=f.__kb._styleUpdateListeners,b=f.__kb._parentAttrUpdateListeners,f=f.__kb._parentStyleUpdateListeners,void 0!==d[e]&&u(d[e],h),void 0===h._stopPropogation&&void 0!==c[e]&&u(c[e],h),void 0===h._stopPropogation&&void 0!==d["*"]&&(u(d["*"],h),void 0===h._stopPropogation&&u(c["*"],h)),void 0===h._stopPropogation&&void 0!==b[e]&&A(b[e],h),void 0===h._stopPropogation&&void 0!==f[e]&&A(f[e],h),
void 0===h._stopPropogation&&void 0!==b["*"]&&(A(b["*"],h),void 0===h._stopPropogation&&A(f["*"],h)));void 0===h._stopPropogation&&void 0!==K[e]&&u(K[e],h);void 0===h._stopPropogation&&void 0!==z[e]&&u(z[e],h);void 0===h._stopPropogation&&void 0!==K["*"]&&(u(K["*"],h),void 0===h._stopPropogation&&u(z["*"],h));return void 0!==h._preventDefault?!1:!0};n.injectPrototypeProperty=function(f,e,h,k,c){var b=f.prototype,g=Object.getOwnPropertyDescriptor(b,e);h=h||f.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var l=p[h];k=k||N;c=c||v;void 0===b.attrListeners&&(b={},b.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb}.bind(b),b.addAttrListener=n.addAttrListener,b.addAttrUpdateListener=n.addAttrUpdateListener,b.addChildAttrListener=O,b.addChildAttrUpdateListener=P,b.hasListener=E,b.removeAttrListener=n.removeAttrListener,b.removeAttrUpdateListener=n.removeAttrUpdateListener,b.removeChildAttrListener=M,b.removeChildAttrUpdateListener=H,b.stopChange=I);void 0===l&&(p[h]={obj:f,
proto:b,descriptors:{},set:void 0,update:void 0},l=p[h],l.set=k,l.update=c);void 0===l.descriptors[e]&&(l.descriptors[e]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(b,e,{get:g.get,set:d(g,e,k,c),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(b,e,{value:R(g,e,k,c),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(b,e,{get:function(){return g.value},set:D(g,e,k,c),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=
function(f,e,h,d){var c=f.style,b=Object.getOwnPropertyDescriptor(c,e),g=f.attrListeners().injectedStyle;h=h||N;d=d||v;void 0===g&&(f.attrListeners().injectedStyle={obj:f,proto:c,descriptors:{},set:void 0,update:void 0},f.attrListeners().injectedStyle.set=h,f.attrListeners().injectedStyle.update=d,g=f.attrListeners().injectedStyle);void 0===g.descriptors[e]&&(g.descriptors[e]=b);b.configurable&&Object.defineProperty(c,e,Q(b,e,h,d,f));return n};n.injectPrototypes=function(f,e,h,d){var c=f.prototype;
e=e||f.toString().split(/\s+/)[1].split("{")[0].replace("()","");var b=p[e],g=Object.getOwnPropertyNames(c);h=h||N;d=d||v;var l;void 0===c.attrListeners&&(c.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb},c.addAttrListener=n.addAttrListener,c.addAttrUpdateListener=n.addAttrUpdateListener,c.addChildAttrListener=O,c.addChildAttrUpdateListener=P,c.removeAttrListener=n.removeAttrListener,c.removeAttrUpdateListener=n.removeAttrUpdateListener,c.removeChildAttrListener=M,
c.removeChildAttrUpdateListener=H,c.hasListener=E,c.stopChange=I);void 0===b&&(p[e]={obj:f,proto:c,descriptors:{},set:void 0,update:void 0},b=p[e],b.set=h,b.update=d);l=p[e].descriptors;for(d=0;d<g.length;d+=1)void 0===l[g[d]]&&n.injectPrototypeProperty(f,g[d],e,h,v);if(-1!==g.indexOf("value")){var m=function(g){var c,e,f;if("checkbox"===this.type||"radio"===this.type)c=!0;e=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=c?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;c&&(b.set(this,"checked",this.checked,e)?b.update(this,"checked",this.checked,e):l.checked.set.call(this,e));this.value!==f&&(this.value=f);b.set(this,"value",this.value,e)?b.update(this,"value",this.value,e):l.value.set.call(this,e)}.bind(this),0)};c.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",m)};c.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",
m)};c.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",m)};c.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",m)}}return n};n.addAttrListener=function(f,e,d){if("html"===f){f=0;for(var k=t.length;f<k;f++)G.call(this,t[f],e,d,!1)}else if("events"===f)for(f=0,k=w.length;f<k;f++)G.call(this,w[f],e,d,!1);else G.call(this,f,e,d,!1);return this};n.addAttrUpdateListener=function(f,e,d){if("html"===
f){f=0;for(var k=t.length;f<k;f++)G.call(this,t[f],e,d,!0)}else if("events"===f)for(f=0,k=w.length;f<k;f++)G.call(this,w[f],e,d,!0);else G.call(this,f,e,d,!0);return this};n.removeAttrListener=function(f,e,d){if("html"===f){f=0;for(var k=t.length;f<k;f++)L.call(this,t[f],e,d,!1)}else if("events"===f)for(f=0,k=w.length;f<k;f++)L.call(this,w[f],e,d,!1);else L.call(this,f,e,d,!1);return this};n.removeAttrUpdateListener=function(f,e,d){if("html"===f){f=0;for(var k=t.length;f<k;f++)L.call(this,t[f],e,
d,!0)}else if("events"===f)for(f=0,k=w.length;f<k;f++)L.call(this,w[f],e,d,!0);else L.call(this,f,e,d,!0);return this};n.hasListener=function(f,e,d){"html"===e&&(e="innerHTML");"events"===e&&(e="onclick");switch(f){case "attr":if(r(J[e],d))return!0;break;case "attrupdate":if(r(K[e],d))return!0}return!1};n.injectedPrototypes=function(){return p};return n}"function"===typeof define&&define.amd&&define("KB",D);return D}(),Z=function(D){return function(){function u(p){document.createDocumentFragment();
this.name=p.tagName.toLowerCase();this.template=n[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=p;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name;if(this.template.match(C())){var t=this.template;p=C();for(var t=t.split(p).filter(Boolean),y={},w=0,r,q,u=t.length;w<u;w++)t[w].match(p)&&(r=d(t[w]).replace(/[<>]/g,""),0===r.indexOf("/")&&y[r.replace("/",
"")]?(r=r.replace("/",""),q=Object.keys(y[r],"array"),0!==q.length&&(q=q[q.length-1],t[q]="\x3c!--"+t[q],y[r].splice(parseInt(q,10),1),t[w]+="--\x3e",q=Object.keys(y[r],"array"),0===q.length&&(y[r]=null,delete y[r]))):(y[r]||(y[r]=[]),y[r][w]=t[w]));w=0;q=Object.keys(y);for(u=q.length;w<u;w++)for(p=Object.keys(y[q[w]],"array");w<u;w++)t[p[0]]="\x3c!--"+t[p[0]]+"--\x3e";this.template=t.join("")}}function A(d,t,y,n){return{value:d,writable:!!t,enumerable:!!n,configurable:!!y}}function r(){return new RegExp("(\\"+
H.split("").join("\\")+")(.*?)(\\"+E.split("").join("\\")+")","g")}function C(){return new RegExp("(<\\"+H.split("").join("\\")+".*?\\"+E.split("").join("\\")+".*?>|<\\/\\"+H.split("").join("\\")+".*?\\"+E.split("").join("\\")+">)")}function q(d){return d.split(new RegExp("("+H.split("").join("\\")+")(.*?)("+E.split("").join("\\")+")","g")).map(function(d,p,n){return n[p-1]===H?H+d+E:d}).filter(function(d,p,n){return 0!==d.length&&d!==H&&d!==E&&0!==d.length})}function d(d){return d.replace(new RegExp("["+
H+E+"]","g"),"").replace(new RegExp("(\\"+I.split("").join("\\")+"(.*?)+)","g"),"").replace(/\s/g,"")}function S(d){return d.reduce(function(d,p){p.match(/(\()(.*?)(\))/)?d.vmFilters[d.vmFilters.length]=p.replace(/[\(\)]/g,""):p.match(/(\[)(.*?)(\])/)?-1!==p.indexOf("~")?d.model[d.model.length]=p.replace(/[\[\]\~]/g,""):-1!==p.indexOf("+")?d.local[d.local.length]=p.replace(/[\[\]\+]/g,""):d.session[d.session.length]=p.replace(/[\[\]\-]/g,""):d.filters[d.filters.length]=p;return d},{filters:[],vmFilters:[],
model:[],local:[],session:[]})}function R(d){return-1!==d.indexOf("for")?d.replace(new RegExp("["+H+E+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(d){return 0!==d.length}):[]}function Q(d){if(2>d.split("==").length&&2>d.split("<=").length&&2>d.split(">=").length&&-1!==d.indexOf("="))return d.substring(d.indexOf("=")+1,d.length)}function G(d){var t=d.match(/^(\s*)(>)((.*?)+)/),y=d.match(/^(\s*)(<)((.*?)+)/);d=d.replace(/(^<|^>)((.*?)+)/,"$2");var n=Q(d),
r=d.match(/((==|<=|>=|<|>)((.*?)+))/g),q=d.match(/(([\+\*-\/])((.*?)+))/g);return{type:t?"insert":y?"outsert":void 0,set:n!==d?n:void 0,filters:r||q?{boolFilter:r?eval("(function(){ return function(v){ return (v"+r[0]+");};}())"):void 0,mathFilter:q?eval("(function(){ return function(v){ return (v"+q[0]+");};}())"):void 0}:void 0}}function L(d){if(0!==d.length){for(var t="",n=0,r=d.length;n<r;n++)if("string"===typeof d[n])t+=d[n];else if(void 0===d[n]._data)t+=d[n].text;else var q=d[n]._data.get(d[n].key),
t=t+O(void 0!==q?q:"",d[n].filters.filters,d[n]._data.filters);return t}return O(d[0]._data.get(d[0].key)||"",d[0].filters.filters,d[0]._data.filters)}function O(d,n,r){for(var q=0,u=n.length;q<u;q++)r[n[q]]&&(d=r[n[q]](d));return d}function P(d,n,q,r){for(var u=0,z=n.length;u<z;u++)if(q[n[u]])q[n[u]](d,r);return d}function M(){function d(e,f){var k=G(f);this.text=e;this.key=f.replace(/(^>|^<*)(.*?)([=*+-\/<>]+)((.*?)+)/g,"$2").replace(/\s/g,"");this.keyLength=this.key.split(".").length;this.localKey=
this.key.split(".").pop();var c;c=-1!==e.indexOf(I)?e.replace(new RegExp("["+E+"]","g"),"").replace(new RegExp("(.*?)(\\"+I.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=S(c);this.component="for"===this.type?R(e)[1]:void 0;this.id=0;this.subType=k.subtype;this.set=k.set;this.inlineFilters=k.filters;this.isBase=!1}function n(e,d){for(var f=0,c=d.length;f<c;f++)e.stopChange().appendChild(d[f])}function q(e){if(e&&window.model)return window.model.get(e[0])}function r(e,d){if(d&&
0!==d.length&&window.model)for(var f=0,c=d.length;f<c;f++)window.model.set(d[f],e)}function u(e){if(e&&window.localStorage)return localStorage.getItem(e[0])}function C(e,d){if(e&&0!==e.length&&window.localStorage)for(var f=0,c=e.length;f<c;f++)localStorage.setItem(e[f],d)}function v(e){if(e&&window.sessionStorage)return sessionStorage.getItem(e[0])}function f(e,d){if(e&&0!==e.length&&window.sessionStorage)for(var f=0,c=e.length;f<c;f++)sessionStorage.setItem(e[f],d)}Object.defineProperties(d.prototype,
{addPointer:A(function(e){for(var d=document.createElement(this.component),f=P(this._data.getLayer(this.key),this.filters.filters,this._data.filters,e)[e],c=0,b=Object.keys(f,"all"),g=b.length;c<g;c++)d.k_post||(d.k_post={}),d.k_post[b[c]]=f,d.k_post.x=e,d.k_post.loopid=this.component+"_"+e;e>=this.node.children.length?this.node.stopChange().appendChild(d):this.node.stopChange().insertBefore(d,this.node.children[e]);z({event:"loopitem",node:d,parent:this.node,map:this});return this}),removePointer:A(function(e){for(var d=
this.node.children[e].kb_maps,f=0,c=Object.keys(this.node.children[e].kb_viewmodel.pointers),b=c.length;f<b;f++){var g=d[c[f]];if(g)for(var l=0,m=g.length;l<m;l++)g[l].unsync(),g[l]=null,delete g[l]}this.node.stopChange().removeChild(this.node.children[e]);f=0;for(b=this.node.children.length;f<b;f++)this.node.children[f].kb_viewmodel.x=f,e=this.node.children[f].kb_viewmodel.loopid,this.node.children[f].kb_viewmodel.loopid=e.substring(0,e.lastIndexOf("_")+1)+f;return this}),reapplyPointer:A(function(e){for(var d=
this.node.children[e].kb_maps,f=this.node.children[e].kb_viewmodel.loopid,c=0,b=Object.keys(this.node.children[e].kb_viewmodel.pointers),g=b.length;c<g;c++){var l=d[b[c]];if(void 0!==l)for(var m=0,p=l.length;m<p;m++)l[m].reconnect()}this.node.children[e].kb_viewmodel.x=e;this.node.children[e].kb_viewmodel.loopid=f.substring(0,f.lastIndexOf("_")+1)+e;return this}),connect:A(function(e){var d=this;this._data=e;if("for"!==this.type){if("node"===this.type)return this.isBase&&(this.dataListener=function(b){"delete"===
b.event?d.unsync():d.replaceNode()},e.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener)),this;if(this.insert){this.setDom(this._data.get(this.key));this.unsync();return}if(this.set){var f=!isNaN(parseInt(this.set,10))&&parseInt(this.set,10).toString().length===this.set.length,c="true"===this.set.replace(/\s/g,"")||"false"===this.set.replace(/\s/g,""),b=-1!==this.set.indexOf('"')||-1!==this.set.indexOf("'");(this.set=f?parseInt(this.set,10):c?"true"===this.set.replace(/\s/g,
""):b?this.set.replace(/((\s*\"|\')(.*?)(\"|\'))/g,"$3"):void 0)&&this._data.set(this.key,this.set)}if(this.outsert){this.setDom("");this.unsync();return}this.inlineFilters&&(this.inlineFilters.boolFilter?(this.filters.filters.unshift("boolFilter"),this._data.filters.boolFilter=this.inlineFilters.boolFilter):(this.filters.filters.unshift("mathFilter"),this._data.filters.mathFilter=this.inlineFilters.mathFilter));this.dataListener=function(b){"delete"===b.event?d.unsync():d.setDom(b.value)};e.getLayer(this.key).addDataUpdateListener(this.localKey,
this.dataListener);1===this.bindText.length&&(this.domListener=function(b){d.setData(b.value)},this.node.__kbhtmllistener=!0,this.node.addAttrUpdateListener(this.listener,this.domListener))}else this.dataListener=function(b){"postset"!==b.type||b.oldValue&&0!==b.oldValue.length||(b.event="create");d.setLoop(b.key,b.event)},e.getLayer(this.key).addDataMethodUpdateListener(this.dataListener);"for"!==this.type&&(this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,q(this.filters.model)):
this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,v(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,u(this.filters.local)),this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=L(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&
(e=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==e?e:"")));return this}),reconnect:A(function(){"for"!==this.type?(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener)):this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);this.connect(this._data);return this}),createloop:A(function(){this.node.stopChange().innerHTML="";for(var e=
0,d=P(this._data.get(this.key),this.filters.filters,this._data.filters).length;e<d;e++)this.setLoop(e,"create");return this}),setData:A(function(e){e=O(e,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,e);r(this.filters.model,e);f(this.filters.session,e);C(this.filters.local,e);return this}),setDom:A(function(e){r(this.filters.model,e);f(this.filters.session,e);C(this.filters.local,e);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):this.isInput&&
-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=L(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(e=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==e?e:""));return this}),setLoop:A(function(e,d){switch(d){case "create":this.addPointer(e);break;case "delete":this.removePointer(e);
break;case "set":this.reapplyPointer(e);break;default:if("push"!==d)for(var f=0,c=this._data.getLayer(this.key).length;f<c;f++)this.reapplyPointer(f)}return this}),bindMaps:A([]),unsync:A(function(){this._data=this.__proto__.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;return this}),reset:A(function(){"for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener).addDataMethodUpdateListener(this.extraListener):
this.dataListener&&(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener).addAttrUpdateListener(this.listener,this.domListener))}),replaceNode:A(function(){var e=document.createDocumentFragment(),d=e.appendChild(document.createElement("div")),f,c=!1,b=this;d.innerHTML=this.bindText.map(function(g,e){if("object"===typeof g){if(void 0===
g._data)return c=!0,"";if(g.key===b.bindText[1].key){var d=O(g._data.get(g.key),g.filters,g._data.filters)||"unknown";"unkown"===d&&1===e&&console.error("You attempted to bind a node to %o, which does not exist on %o, with bindText: %o",g.key,g._data,g.base);return d}return O(g._data.get(g.key),g.filters,g._data.filters)}return g}).join("");c||(f=d.children[0],e.replaceChild(f,d),this.base.local.parentElement.stopChange().replaceChild(e,this.base.local),this.base.local=f,z({event:"replaceNode",node:this.base.local,
parent:this.node,map:this.base}))})});return d}var H="{{",E="}}",I="|",n={},J=/(<\/.*?>)/g;D().call();var K=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}),F={loopitem:[],replaceNode:[]},z=function(d){for(var n=F[d.event],q=0,r=n.length;q<r;q++)n[q](d)};u.start=function(d){if(void 0===d)return H;H="string"===typeof d?d:H;return u};u.end=function(d){if(void 0===d)return E;E="string"===typeof d?d:E;return u};u.pipe=function(d){if(void 0===d)return I;I="string"===typeof d?
d:I;return u};u.getUnknown=function(d){var q=d.match(J).map(function(d){return d.replace(/[<\/>]/g,"")});q.filter(function(d,p){return 0!==d.indexOf(H)&&document.createElement(d)instanceof HTMLUnknownElement&&-1===q.indexOf(d,p+1)&&void 0===n[d]});return q};u.isRegistered=function(d){return void 0!==n[d]};u.register=function(d,q){void 0===n[d]?(n[d]=q,u.getUnknown(q)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",d);return this};u.addEventListener=function(d,
n){void 0!==F[d]?F[d].push(n):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",d);return u};u.removeEventListener=function(d,n){if(void 0!==F[d])for(var q=0,r=F[d].length;q<r;q++)F[d][q].toString()===n.toString()&&F[d].splice(q,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",d);return u};Object.defineProperties(u.prototype,{register:A(u.register),isRegistered:A(u.isRegistered),getUnknown:A(u.getUnknown),
map:A(function(n){function u(y,w){for(var z=0,A=y.length;z<A;z++)if(void 0===y[z].kb_maps&&8!==y[z].nodeType){y[z].kb_mapper=n;y[z].kb_maps=w;if(3===y[z].nodeType){var v=y[z],f=w,e=v.textContent;if(e.match(r())){var h=q(e),k=M();k.prototype.type=e.match(new RegExp("(\\"+H.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+E.split("").join("\\")+")","g"))?"for":"text";k.prototype.text=e;k.prototype.bindText=h;k.prototype.listener="textContent";k.prototype.attr="textContent";k.prototype.localAttr=
"textContent";k.prototype.local=v;k.prototype.node=v.parentElement;k.prototype.binds=f;v=0;for(e=h.length;v<e;v++)if(0===h[v].indexOf(H)){var c="for"===k.prototype.type?R(h[v])[0]:d(h[v]),b=new k(h[v],c);void 0===f[c]&&(f[c]=[]);b.bindText[v]=b;b.bindMaps.push(b);b.id=f[c].length;f[c].push(b)}}}else for(f=y[z],h=w,k=Array.prototype.slice.call(f.attributes),v=f instanceof HTMLUnknownElement,e=0,c=k.length;e<c;e++)if(k[e].value.match(r())){var b=q(k[e].value),g=M();g.prototype.type=v?"component":"attribute";
g.prototype.text=k[e].value;g.prototype.bindText=b;g.prototype.isEvent=-1!==K.indexOf(k[e].name);g.prototype.isInput="input"===f.tagName.toLowerCase();g.prototype.isRadio=g.prototype.isInput?-1!==["radio","checkbox"].indexOf(f.type):!1;g.prototype.listener=k[e].name;g.prototype.attr=k[e].name;g.prototype.localAttr="value";g.prototype.local=k[e];g.prototype.node=f;g.prototype.binds=h;g.prototype.isEvent&&f.removeAttribute(k[e].name);for(var l=0,m=b.length;l<m;l++)if(0===b[l].indexOf(H)){var B=d(b[l]),
T=new g(b[l],B);void 0===h[B]&&(h[B]=[]);T.bindText[l]=T;T.bindMaps.push(T);T.id=h[B].length;h[B].push(T)}}y[z].childNodes&&0!==y[z].childNodes.length&&(w=u(y[z].childNodes,w))}else if(8===y[z].nodeType&&(v=y[z],f=w,e=v.textContent,e.match(C())))for(h=q(e),k=M(),k.prototype.type="node",k.prototype.text=e,k.prototype.bindText=h,k.prototype.base=h[1],k.prototype.listener="textContent",k.prototype.attr="textContent",k.prototype.localAttr="textContent",k.prototype.local=v,k.prototype.node=v.parentElement,
k.prototype.binds=f,k.prototype.replacement=void 0,v=0,e=h.length;v<e;v++)0===h[v].indexOf(H)&&(c=d(h[v]),b=new k(h[v],c),void 0===f[c]&&(f[c]=[]),b.bindText[v]=b,b.bindMaps.push(b),b.id=f[c].length,1===v&&(k.prototype.base=b,b.isBase=!0),f[c].push(b));return w}return u(n.childNodes,{})})});return u}}(W),aa=function(){return function(){function D(q){0===q.length&&(q=A);q=new u(q);for(var d=0,S=C.length;d<S;d++)if(!q._stopPropogation)C[d](q);q._preventDefault||(document.body.innerHTML="<"+q.hash+"></"+
q.hash+">",r(q.hash));return D}function u(q){this.preventDefault=function(){this._preventDefault=!0};this.stopPropogation=function(){this._stopPropogation=!0};this.hash=q;this.url=window.location.href}var A="",r=function(){},C=[];D.base=function(q){if(void 0===q)return A;A="string"===typeof q?q:A;return D};D.addHashListener=function(q){C.push(q);return D};D.removeHashListener=function(q){for(var d=0,r=C.length;d<r;d++)if(C[d].toString()===q.toString()){C.splice(d,1);break}return D};D.onChange=function(q){if(void 0===
q)return r;r="function"===typeof q?q:r;return D};D.watch=function(q){window.onhashchange=q?function(){D(window.location.hash.replace("#",""))}:null;return D};return D}}(),V=function(D,u,A,r,C){return function(q){function d(b,c,e,f,k){function n(b,c,d,g,e){for(var f=F({},b),l=0,m=Object.keys(g),k=m.length;l<k;l++)-1!==h.indexOf(m[l])?Object.defineProperty(f,m[l],G(g[m[l]],"filters"!==m[l])):g.pointers?void 0===g.pointers[m[l]]&&f.set(m[l],g[m[l]]):f.set(m[l],g[m[l]]);if(g.pointers)for(f.pointers||
Object.defineProperty(f,"pointers",G({},!1,!0)),l=0,m=Object.keys(g.pointers),k=m.length;l<k;l++)f.pointers[m[l]]=g.pointers[m[l]],f.addPointer(f.pointers[m[l]].point,f.pointers[m[l]].key,m[l]);c.apply(f,d);l=0;m=Object.keys(c.prototype);for(k=m.length;l<k;l++)Object.defineProperty(f,[m[l]],G(c.prototype[m[l]],!0));l=0;m=Object.keys(e);for(k=m.length;l<k;l++)-1!==h.indexOf(m[l])?Object.defineProperty(f,m[l],G(e[m[l]],"filters"!==m[l])):e.pointers?void 0===e.pointers[m[l]]&&f.set(m[l],e[m[l]]):f.set(m[l],
e[m[l]]);if(e.pointers)for(f.pointers||Object.defineProperty(f,"pointers",G({},!1,!0)),l=0,m=Object.keys(e.pointers),k=m.length;l<k;l++)f.pointers[m[l]]=e.pointers[m[l]],f.addPointer(f.pointers[m[l]].point,f.pointers[m[l]].key,m[l]);l=0;m=Object.keys(f.filters);for(k=m.length;l<k;l++)f.filters[m[l]]=f.filters[m[l]].bind(f);if(f.sessionStorage){if(c=sessionStorage.getItem(f.id||b))for(c=JSON.parse(c),l=0,m=Object.keys(c),k=m.length;l<k;l++)f.set(m[l],c[m[l]]);else sessionStorage.setItem(f.id||b,f.stringify());
f.addChildDataUpdateListener("*",function(){sessionStorage.setItem(f.id||b,f.stringify())})}if(f.localStorage){if(c=localStorage.getItem(f.id||b))for(c=JSON.parse(c),l=0,m=Object.keys(c),k=m.length;l<k;l++)f.set(m[l],c[m[l]]);else localStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",function(){localStorage.setItem(f.id||b,f.stringify())})}f.store&&U.set(f.id||b,f);return f}function p(b,c,d){b.kb_viewmodel=d;var g=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=g;Object.keys(g).forEach(function(b){g[b].forEach(function(b){switch(b.type){case "for":b.connect(d).createloop();
break;case "component":b.connect(d).unsync();break;case "node":b.connect(d).replaceNode();break;default:b.connect(d)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onGlobalFinish&&c.wrapper.kb_viewmodel.onGlobalFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onNodeFinish&&c.wrapper.kb_viewmodel.onNodeFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function q(b){b=b.querySelectorAll("*");for(var c=0,g=b.length;c<g;c++)b[c]instanceof
HTMLUnknownElement&&d(b[c])}function r(b,e){t=new y(e,!0);t.wrapper.innerHTML=t.template;t.wrapper.kb_mapper=t.wrapper;Object.defineProperty(t.wrapper,"__kbcomponenttree",G(e.kb_mapper?e.kb_mapper.__kbcomponenttree.slice():[]));e.parentElement.stopChange().replaceChild(t.fragment,e);c.unshift(t.wrapper);p(t.wrapper,t,n(b,N[b],c,v,w));-1===t.wrapper.__kbcomponenttree.indexOf(b)||t.wrapper.kb_viewmodel.multiple?(t.wrapper.__kbcomponenttree.push(b),t.wrapper.className+=" "+t.wrapper.kb_viewmodel.local,
t.wrapper.className+=" "+t.wrapper.kb_viewmodel.id,t.wrapper.className+=t.wrapper.kb_viewmodel.loopid?" "+t.wrapper.kb_viewmodel.loopid:"",t.wrapper.kb_viewmodel.subscribeDeep("*",A).callAllSubscribers(),t.wrapper.kb_viewmodel.kbnode=t.wrapper,t.wrapper.addChildAttrListener("html",function(b){if(!b.stopChange){if(-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&(b.arguments[0]instanceof HTMLUnknownElement||b.arguments[0]instanceof HTMLScriptElement)||-1!==["innerHTML",
"textContent"].indexOf(b.attr)&&b.target.__kbhtmllistener)return!0;b.preventDefault();b.stopPropagation()}}),t.wrapper.addChildAttrUpdateListener("html",function(b){-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&b.arguments[0]instanceof HTMLUnknownElement&&d(b.arguments[0])}),q(t.wrapper)):(console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
b),console.error("Recursive Component %o on %o",t.wrapper,t.wrapper.parentElement))}var u=b.tagName.toLowerCase(),t;k=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")});var v=Q(z,{}),w={};void 0===c&&(c=[]);e&&Q(e,v);Object.defineProperty(v,"local",G(v.local||"local_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"id",G(v.id||"id_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"filters",G(v.filters||
{},!1,!1,!0));"function"!==typeof v.onFinish&&(v.onFinish=function(){});Object.defineProperty(v,"onGlobalFinish",G(v.onFinish,!0,!1,!0));v.listen=O;Object.defineProperty(v,"listen",G(v.listen,!0,!1,!0));v.unlisten=L;Object.defineProperty(v,"unlisten",G(v.unlisten,!0,!1,!0));v.alert=P;Object.defineProperty(v,"alert",G(v.alert,!0,!1,!0));Object.defineProperty(v,"sessionStorage",G(!1,!0,!1,!0));Object.defineProperty(v,"localStorage",G(!1,!0,!1,!0));Object.defineProperty(v,"store",G(!1,!0,!1,!0));Object.defineProperty(v,
"multiple",G(!1,!0,!1,!0));f&&Q(f,w);w.innerHTML=Array.prototype.slice.call(b.childNodes);e=0;for(f=b.attributes.length;e<f;e++)w[b.attributes[e].name]=b.attributes[e].value;e=0;for(f=k.length;e<f;e++)b[k[e]]&&(w[k[e]]=b[k[e]]);b.k_post&&Q(b.k_post,w);d.isRegistered(u)||b.kb_isLoading?d.isRegistered(u)&&r(u,b):(d.loadWaitList(u,function(c,d){r(u,b)}),d.loadWaitList(u).loading||(d.loadWaitList(u).loading=!0,K(u)))}function A(b){var c=this.__kbref.local,d=this.__kbref.id,e=this.__kbref.loopid,h=this.__kbscopeString+
(0!==this.__kbscopeString.length?".":"")+b.key;if(f[c]&&f[c][h])for(var k=0,n=f[c][h].length;k<n;k++)f[c][h][k](b);if(f[d]&&f[d][h])for(k=0,n=f[d][h].length;k<n;k++)f[d][h][k](b);if(f[e]&&f[e][h])for(k=0,n=f[e][h].length;k<n;k++)f[e][h][k](b)}function R(b){var c=b.node.tagName.toLowerCase();d.isRegistered(c)||b.node.kb_isLoading?d.isRegistered(c)&&("replaceNode"===b.event?d(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):d(b.node)):(b.node.kb_isLoading=!0,d.loadWaitList(c,function(c,e){"replaceNode"===
b.event?d(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):d(b.node)}),d.loadWaitList(c).loading||(d.loadWaitList(c).loading=!0,K(c)))}function Q(b,c){var d=Object.keys(b);c.pointers||Object.defineProperty(c,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var e=0,f=d.length;e<f;e++)if(F.prototype.isObservable(b,d[e]))c.pointers[d[e]]={key:b.__kbscopeString.split(".").pop(),point:b.__kbImmediateParent};else if(F.prototype.isMixed(b[d[e]]))c.pointers[d[e]]={key:b[d[e]].__kbscopeString.split(".").pop(),
point:b[d[e]].__kbImmediateParent};else if(F.prototype.isObject(b[d[e]])){void 0===c[d[e]]&&(c[d[e]]={});for(var h=0,k=Object.keys(b[d[e]]);h<f;h++)c[d[e]][k[h]]=b[d[e]][k[h]]}else if(F.prototype.isArray(b[d[e]]))for(h=0;h<f;h++)c[d[e]][h]=b[d[e]][h];else c[d[e]]=b[d[e]];return c}function G(b,c,d,e){return{value:b,writable:!!c,enumerable:!!e,configurable:!!d}}function L(b,c,d){if(2===arguments.length)if(d=c.bind(this),c=b,v[c])for(var e=0,h=v[c].length;e<h;e++)v[c][e].toString()===d.toString()&&v[c].splice(e,
1);else console.error("no listeners exists by key %o",c);else if(d=d.bind(this),f[b]&&f[b][c])for(e=0,h=f[b][c].length;e<h;e++)f[b][c].toString()===d.toString()&&f[b][c].splice(e,1);return this}function O(b,c,d){if(2===arguments.length)d=c.bind(this),c=b,v[c]||(v[c]=[]),v[c].push(d);else if(d=d.bind(this),f[b]||(f[b]={}),f[b][c]||(f[b][c]=[]),f[b][c].push(d),document.querySelector("."+b)){var e=f[b][c],h=document.querySelector("."+b).kb_mapper.kb_viewmodel,k=h.getLayer(c),n=c.split(".").pop(),p=k[n];
e[e.length-1]({key:n,value:p,oldValue:p,local:k,kbref:h,onChange:!1,initial:!0})}return this}function P(b,c){if(v[b])for(var d=0,e=v[b].length;d<e;d++)v[b][d](c);return this}function M(){if(!document.querySelector('meta[name="viewport"]')){var b=document.createElement("meta");b.name="viewport";b.content="width=device-width, initial-scale=1.0";document.head.stopChange().appendChild(b)}d.device||(d.device={});d.device.type=d.detectDevice();d.device.orientation=d.detectOrientation();d.device.browser=
d.detectBrowser();d.device.screenSize=d.detectScreenSize();d.device.orientationSize=d.detectScreenOrientation();d.device.keyboard="desktop"!==d.device.type?window.innerHeight<screen.height-.4*screen.height:!1;document.body.className=d.device.type+" "+d.device.orientation+(d.device.keyboard?" keyboard":"")+" "+d.device.browser+" "+d.device.screenSize+" "+d.device.orientationSize}function H(b,c){var d=document.createElement("script");d.src=b;d.onerror=function(){c(null,!0)};d.onload=function(){c(z)};
document.head.stopChange().appendChild(d)}function E(b){H((void 0!==z.prefix?z.prefix:"")+"/node_modules/konnekt/config/config.js",b)}function I(b){H((void 0!==z.prefix?z.prefix:"")+"/bower_components/konnekt/config/config.js",b)}function n(b){H((void 0!==z.prefix?z.prefix:"")+"/config/config.js",b)}function J(){for(var b=0,c=t.length;b<c;b++)t[b]()}window.K_Components||(window.K_Components={});var K=u().onLoad(function(b,c){var e="<style>"+unescape(c.prototype.k_css)+"</style>"+unescape(c.prototype.k_html);
d.register(b,c,e,c.prototype.cms);p?(d.loadWaitList(b).forEach(function(d){d(b,c)}),d.loadWaitList(b,"clear")):t.push(function(){d.loadWaitList(b).forEach(function(d){d(b,c)});d.loadWaitList(b,"clear")})}),F=D(),z=q||{},p=!1,t=[],y=r().addEventListener("loopitem",R).addEventListener("replaceNode",R),w=C().base(void 0!==z.base?z.base:"default").watch(!0).onChange(function(b){d(document.querySelector(b))}),U=F({},"Model"),N={},v={},f={},e=function(){return window.location.search.replace("?","").split("&").filter(function(b){return 0!==
b.length}).reduce(function(b,c){b[c.split("=")[0]]=c.split("=")[1];return b},{})}(),h="id filters class sessionStorage localStorage store component multiple".split(" "),k={},c;d.detectDevice=function(){return navigator.userAgent.toLowerCase().match(/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|[^a-z]rim[^a-z]|sonyericsson|nokia|[^a-z]mib[^a-z])/)?"mobile":navigator.userAgent.toLowerCase().match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/)?
"tablet":"desktop"};d.detectBrowser=function(){var b=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),c="undefined"!==typeof InstallTrigger,d=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e=!!document.documentMode,f=!e&&!!window.StyleMedia,h=!!window.chrome&&!!window.chrome.webstore;return b?"opera":c?"firefox":d?"safari":h?"chrome":e?"ie":f?"edge":"unknown"};d.detectOrientation=
function(){return screen.width>screen.height?"landscape":screen.height>screen.width?"portrait":"square"};d.detectScreenOrientation=function(){return window.innerWidth>window.innerHeight?"landscape-size":window.innerHeight>window.innerWidth?"portrait-size":"square-size"};d.detectScreenSize=function(){return 1280>("landscape"===this.detectOrientation()?window.innerWidth:window.innerHeight)?750>("landscape"===this.detectOrientation()?window.innerWidth:window.innerHeight)?"mobile-size":"tablet-size":
"desktop-size"};d.config=function(b){function c(b,d){for(var e=0,f=Object.keys(b),h=f.length;e<h;e++)"object"===typeof b[f[e]]?(void 0===d[f[e]]&&(d[f[e]]={}),c(b[f[e]],d[f[e]])):"object"!==d[f[e]]&&(d[f[e]]=b[f[e]])}c(b,z);return d};window.addEventListener("resize",M);document.body?M():document.addEventListener("DOMContentLoaded",function(){M()});d.register=function(b,c,e,f){y.register(b,e);N[b]=c;return d};d.isRegistered=function(b){return void 0!==N[b]&&y.isRegistered(b)};d.registered=function(){return Object.keys(N)};
d.loadWaitList=function(b,c){if("undefined"===typeof c&&b)return k[b];if(b){if(void 0===k[b]||"clear"===c){var e=void 0===k[b]?!1:!!k[b].loading;k[b]=[];k[b].loading=e}"function"===typeof c&&k[b].push(c)}return d};d.localRouting=function(b){b?(c=Node.prototype.appendChild,Node.prototype.appendChild=function(b){if("script"===b.nodeName.toLowerCase()){b.src=b.src.substring(0,-1!==b.src.indexOf("?")?b.src.indexOf("?"):b.src.length);var d=b.src.match(/(.*?component\/)/);d&&(e.env||(e.env="prod"),"dev"===
e.env&&(e.env="qa"),d=b.src.replace(d[0],"").replace(/[\/\s]/g,""),b.src=(void 0!==z.prefix?z.prefix:"")+"/components/"+d+"/build/"+e.env+"/"+d+(e.debug&&"prod"!==e.env?"":".min")+".js",arguments[0]=b)}return c.apply(this,arguments)}):c&&(Node.prototype.appendChild=c,c=null);return d};d.hashRouting=function(b){b&&(document.body?p?w(window.location.hash.replace("#","")):t.push(function(){w(window.location.hash.replace("#",""))}):document.addEventListener("DOMContentLoaded",function(){p?w(window.location.hash.replace("#",
"")):t.push(function(){w(window.location.hash.replace("#",""))})}));return this};d.addHashRouter=function(b){_hasher.addHashListener(b);return d};d.removeHashRouter=function(b){_hasher.removeHashListener(b);return d};F.prototype._parse||(F.prototype._parse=F.prototype.parse);F.prototype.parse=function(){if(this.__kbref.kbnode){var b=this.__kbref.kbnode.kb_mapper.kb_maps;this._parse.apply(this,arguments);this.unsubscribeDeep("*",A);this.subscribeDeep("*",A).callAllSubscribers();Object.keys(b).forEach(function(c){b[c].forEach(function(b){b.reset()})})}else return this._parse.apply(this,
arguments)};(function(){E(function(b,c){c?I(function(b,c){c&&console.error("the Konnekt local config was not found, this issue happens when You do not have Konnekt isntalled via th standard node_modules or bower_components module directories");n(function(b,c){p=!0;J()})}):n(function(b,c){p=!0;J()})})})();return window.Konnekt=d}}(X,Y,W,Z,aa);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return V}):"undefined"!==typeof module&&
(module.exports=V);return V}();
